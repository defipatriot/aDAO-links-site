<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alliance DAO - NFT Release History</title>
    <link rel="icon" type="image/x-icon" href="https://raw.githubusercontent.com/defipatriot/aDAO-Image-Files/main/favicon.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="https://raw.githubusercontent.com/defipatriot/aDAO-Image-Files/main/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://raw.githubusercontent.com/defipatriot/aDAO-Image-Files/main/favicon-32x32.png">
    <link rel="apple-touch-icon" sizes="180x180" href="https://raw.githubusercontent.com/defipatriot/aDAO-Image-Files/main/apple-touch-icon.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <script>
      window.va = window.va || function () { (window.va.q = window.va.q || []).push(arguments); };
    </script>
    <script src="/_vercel/insights/script.js" defer></script>
    <style>
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: #0D0D0D;
            color: #EAEAEA;
        }
        .stat-card {
            background: #1A1A1A;
            border: 1px solid #2e2e2e;
        }
        .timeline-item::before {
            content: '';
            position: absolute;
            top: 12px;
            left: 11px;
            width: 2px;
            height: 100%;
            background-color: #374151;
        }
        .timeline-item:last-child::before {
            display: none;
        }
        .timeline-dot {
            position: absolute;
            top: 12px;
            left: 0;
            width: 24px;
            height: 24px;
            border-radius: 9999px;
            background-color: #0D0D0D;
            border: 4px solid #2dd4bf;
            z-index: 10;
        }
        .timeline-dot.free {
            border-color: #22c55e;
        }
        .timeline-dot.broken {
            border-color: #ef4444;
        }
        .spinner-small {
            font-size: 1rem;
            color: #9ca3af;
        }
        .backing-bar-container {
            position: relative;
            height: 1rem;
            background-color: #374151;
            border-radius: 9999px;
            margin-top: 1.5rem;
            margin-bottom: 2.5rem;
            display: flex;
            overflow: hidden;
        }
        .backing-bar-segment {
            height: 100%;
        }
        .backing-bar-marker {
            position: absolute;
            bottom: -2rem;
            transform: translateX(-50%);
            text-align: center;
        }
        .backing-bar-marker::before {
            content: '';
            position: absolute;
            bottom: 1.5rem;
            left: 50%;
            width: 1px;
            height: 0.5rem;
            background-color: #6b7280;
        }
        .backing-bar-label {
            font-size: 0.7rem;
            line-height: 1rem;
            color: #9ca3af;
            white-space: nowrap;
        }
        .backing-bar-value {
            font-weight: 600;
            color: #e5e7eb;
        }
        .phase-details {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.75rem;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid #374151;
        }
        .phase-details dt {
            color: #9ca3af;
            font-size: 0.75rem;
        }
        .phase-details dd {
            color: #e5e7eb;
            font-size: 0.875rem;
            font-weight: 500;
        }
        .estimate-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            background: rgba(251, 191, 36, 0.1);
            border: 1px solid rgba(251, 191, 36, 0.3);
            color: #fbbf24;
            font-size: 0.65rem;
            padding: 0.125rem 0.5rem;
            border-radius: 9999px;
            margin-left: 0.5rem;
        }
        .source-link {
            color: #60a5fa;
            text-decoration: none;
            font-size: 0.75rem;
        }
        .source-link:hover {
            text-decoration: underline;
        }
        .disclaimer-box {
            background: rgba(251, 191, 36, 0.05);
            border: 1px solid rgba(251, 191, 36, 0.2);
            border-radius: 0.75rem;
            padding: 1rem 1.25rem;
        }
    </style>
</head>
<body class="antialiased">

    <!-- Header -->
    <header class="py-4">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex justify-between items-center">
            <a href="index.html" class="block w-32"> 
                <img src="https://raw.githubusercontent.com/defipatriot/aDAO-Image-Files/main/Alliance%20DAO%20Logo.png" alt="Alliance DAO Logo" class="h-16 w-auto transition-transform transform hover:scale-110" onerror="this.src='https://placehold.co/128x64/0D0D0D/EAEAEA?text=Logo'; this.onerror=null;">
            </a>
            <div class="text-center">
                 <h1 class="text-3xl font-bold text-gray-300">NFT Release History</h1>
            </div>
             <div class="w-32 flex justify-end">
                <img src="https://raw.githubusercontent.com/defipatriot/aDAO-Image-Planets-Empty/main/Terra.PNG" alt="Terra Logo" class="h-16 w-auto" onerror="this.src='https://placehold.co/128x64/0D0D0D/EAEAEA?text=Logo'; this.onerror=null;">
             </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        <div class="text-center mb-12">
            <h2 class="text-4xl font-bold text-white">Collection Release & Supply Breakdown</h2>
            <p class="mt-4 text-lg text-gray-400">An overview of the distribution and release schedule for the 10,000-piece AllianceDAO NFT collection.</p>
            
            <!-- Live Backing Display -->
            <div class="mt-4 text-center">
                <p class="text-sm text-gray-500">Current Backing Per NFT:</p>
                <p id="live-backing-display" class="text-xl font-bold text-cyan-400">
                    <i class="fas fa-spinner fa-spin text-cyan-400"></i> LUNA
                </p>
            </div>
        </div>

        <!-- Value Today Snapshot -->
        <div id="value-snapshot" class="stat-card p-6 rounded-xl mb-8">
            <h3 class="text-lg font-bold text-white mb-4 flex items-center gap-2">
                <i class="fas fa-chart-line text-cyan-400"></i>
                Current Value Snapshot
            </h3>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- Floor Price -->
                <div class="text-center p-4 bg-gray-800/50 rounded-lg">
                    <p class="text-sm text-gray-400 mb-1">Floor Price (Unbroken)</p>
                    <p id="snapshot-floor" class="text-2xl font-bold text-white">
                        <i class="fas fa-spinner fa-spin text-sm"></i>
                    </p>
                    <p id="snapshot-floor-source" class="text-xs text-gray-500 mt-1">Loading...</p>
                </div>
                <!-- Backing Value -->
                <div class="text-center p-4 bg-gray-800/50 rounded-lg">
                    <p class="text-sm text-gray-400 mb-1">Backing Per NFT</p>
                    <p id="snapshot-backing" class="text-2xl font-bold text-cyan-400">
                        <i class="fas fa-spinner fa-spin"></i>
                    </p>
                    <p id="snapshot-backing-usd" class="text-xs text-gray-500 mt-1">Loading...</p>
                </div>
                <!-- Historical Mint Range -->
                <div class="text-center p-4 bg-gray-800/50 rounded-lg">
                    <p class="text-sm text-gray-400 mb-1">Historical Mint Cost</p>
                    <p class="text-2xl font-bold text-white">$32 - $120 <span class="text-sm font-normal text-gray-500">USD</span></p>
                    <p class="text-xs text-gray-500 mt-1">Across all phases</p>
                </div>
            </div>
            <!-- Key Insight -->
            <div id="value-insight" class="mt-4 p-3 bg-gradient-to-r from-cyan-900/20 to-blue-900/20 border border-cyan-800/30 rounded-lg">
                <p class="text-sm text-gray-300 text-center">
                    <i class="fas fa-lightbulb text-yellow-400 mr-2"></i>
                    <span id="insight-text">Loading value comparison...</span>
                </p>
            </div>
        </div>

        <!-- Summary Stats -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-12 text-center">
            <div class="stat-card p-5 rounded-xl">
                <p class="text-2xl font-bold text-white">10,000</p>
                <p class="text-gray-400 text-sm mt-1">Total Supply</p>
            </div>
            <div class="stat-card p-5 rounded-xl border-green-400/30">
                <p class="text-2xl font-bold text-green-400">3,172</p>
                <p class="text-gray-400 text-sm mt-1">Public Circulation</p>
            </div>
            <div class="stat-card p-5 rounded-xl">
                <p class="text-2xl font-bold text-white">5,828</p>
                <p class="text-gray-400 text-sm mt-1">DAO Treasury</p>
            </div>
            <div class="stat-card p-5 rounded-xl border-red-400/30">
                <p class="text-2xl font-bold text-red-400">1,000</p>
                <p class="text-gray-400 text-sm mt-1">DAO Held (Broken)</p>
            </div>
        </div>

        <div class="stat-card p-8 rounded-xl space-y-12">
            
            <!-- Introduction -->
            <div>
                <h3 class="text-2xl font-bold text-white mb-4">Introduction</h3>
                <p class="text-gray-400 leading-relaxed">
                    The AllianceDAO NFT collection has a fixed total supply of 10,000 unique NFTs. While the entire collection was minted at once, the NFTs have been released to the public in distinct phases. This document provides a comprehensive overview of each release phase, including mint prices in both LUNA and approximate USD values at the time of mint.
                </p>
            </div>

            <!-- Disclaimer -->
            <div class="disclaimer-box">
                <div class="flex items-start gap-3">
                    <i class="fas fa-info-circle text-yellow-400 mt-0.5"></i>
                    <div>
                        <p class="text-yellow-200 font-medium text-sm">Note on Data Accuracy</p>
                        <p class="text-gray-400 text-sm mt-1">
                            This timeline has been pieced together from governance proposals, Telegram announcements, and on-chain data. Some figures (marked with <span class="estimate-badge"><i class="fas fa-calculator"></i> Est.</span>) are estimates based on the known total of 681 NFTs sold across Phase 1b and Phase 2a combined. The exact split between these phases is uncertain.
                        </p>
                    </div>
                </div>
            </div>

            <!-- Public Release Progress -->
            <div>
                <h3 class="text-2xl font-bold text-white mb-6">Public Release Progress</h3>
                <div class="w-full bg-gray-700 rounded-full h-4 mb-2">
                    <div class="bg-gradient-to-r from-cyan-500 to-blue-500 h-4 rounded-full" style="width: 31.72%"></div>
                </div>
                <p class="text-center text-cyan-400 font-semibold mb-8">3,172 of 10,000 (31.72%) in Public Circulation</p>

                <!-- Timeline -->
                <div class="relative pl-8">
                    
                    <!-- Phase 0: GoA Claim -->
                    <div class="timeline-item pb-10">
                        <div class="timeline-dot free"></div>
                        <div class="stat-card p-6 rounded-xl">
                            <p class="text-sm text-gray-400">December 12, 2023 — January 12, 2024</p>
                            <h4 class="text-xl font-bold text-white mt-1">Phase 0: Game of Alliance Claim</h4>
                            <p class="text-gray-400 mt-2">
                                The original NFT claim for participants of the Game of Alliance (GoA) incentivized testnet. GoA ran from February 9 to March 2, 2023, battle-testing Terra's Alliance module. Participants were assigned claimable NFTs based on their scores. After the 1-month claim period ended, unclaimed NFTs were sent to the DAO treasury.
                            </p>
                            <dl class="phase-details">
                                <div>
                                    <dt>NFTs Claimed</dt>
                                    <dd class="text-green-400">1,191</dd>
                                </div>
                                <div>
                                    <dt>Mint Price</dt>
                                    <dd class="text-green-400">FREE</dd>
                                </div>
                                <div>
                                    <dt>LUNA Price</dt>
                                    <dd>$0.55 - $1.00</dd>
                                </div>
                                <div>
                                    <dt>USD Cost</dt>
                                    <dd class="text-green-400">$0</dd>
                                </div>
                            </dl>
                        </div>
                    </div>

                    <!-- Phase 1b: Staker Mint -->
                    <div class="timeline-item pb-10">
                        <div class="timeline-dot"></div>
                        <div class="stat-card p-6 rounded-xl">
                            <p class="text-sm text-gray-400">February 20 — February 27, 2024</p>
                            <h4 class="text-xl font-bold text-white mt-1">
                                Phase 1b: DAO Staker Mint
                                <span class="estimate-badge"><i class="fas fa-calculator"></i> Est.</span>
                            </h4>
                            <p class="text-gray-400 mt-2">
                                A secondary mint for addresses that had NFTs staked to AllianceDAO on January 12, 2024. Split into two groups: those with 2+ NFTs staked received assigned rarities (20-40) via NFT Switch, while those with 1 NFT staked could mint randomly via BBL Candy Machine with a chance at a rarity 40 Phoenix.
                            </p>
                            <dl class="phase-details">
                                <div>
                                    <dt>NFTs Allocated</dt>
                                    <dd>385</dd>
                                </div>
                                <div>
                                    <dt>NFTs Sold</dt>
                                    <dd class="text-cyan-400">181 - 385 <span class="estimate-badge"><i class="fas fa-calculator"></i> Est.</span></dd>
                                </div>
                                <div>
                                    <dt>Mint Price</dt>
                                    <dd>50 LUNA</dd>
                                </div>
                                <div>
                                    <dt>LUNA Price</dt>
                                    <dd>$0.65 - $0.70</dd>
                                </div>
                                <div>
                                    <dt>USD Cost</dt>
                                    <dd>$32.50 - $35.00</dd>
                                </div>
                                <div>
                                    <dt>Eligibility</dt>
                                    <dd>Stakers on Jan 12</dd>
                                </div>
                            </dl>
                            
                            <!-- Backing Bar for Phase 1b -->
                            <div class="relative mt-6">
                                <div id="phase1b-bar" class="backing-bar-container">
                                    <div class="h-full flex items-center justify-center"><i class="fas fa-spinner fa-spin spinner-small"></i></div>
                                </div>
                                <div id="phase1b-label-mint" class="backing-bar-marker" style="left: 0%; opacity: 0;">
                                    <span class="backing-bar-label">Mint: 50</span>
                                </div>
                                <div id="phase1b-label-backing" class="backing-bar-marker" style="left: 0%; opacity: 0;">
                                    <span class="backing-bar-label">Backing: <span id="phase1b-backing-value" class="backing-bar-value">...</span></span>
                                </div>
                            </div>
                            <p id="phase1b-gain-text" class="text-xs text-center text-gray-400 mt-1">Calculating gain...</p>
                        </div>
                    </div>

                    <!-- Phase 2a: Terra NFT Communities -->
                    <div class="timeline-item pb-10">
                        <div class="timeline-dot"></div>
                        <div class="stat-card p-6 rounded-xl">
                            <p class="text-sm text-gray-400">February 28 — ~March 10, 2024</p>
                            <h4 class="text-xl font-bold text-white mt-1">
                                Phase 2a: Terra NFT Communities
                                <span class="estimate-badge"><i class="fas fa-calculator"></i> Est.</span>
                            </h4>
                            <p class="text-gray-400 mt-2">
                                Expanded access to Terra NFT communities including Galactic Punks, Skeleton Punks, PixeLions, and Galactic Mining Club. First-come first-serve, limited to 1 NFT per eligible address. This mint occurred during an extremely volatile period for LUNA, with prices ranging from $0.70 to over $1.60.
                            </p>
                            <dl class="phase-details">
                                <div>
                                    <dt>NFTs Allocated</dt>
                                    <dd>1,000</dd>
                                </div>
                                <div>
                                    <dt>NFTs Sold</dt>
                                    <dd class="text-cyan-400">296 - 500 <span class="estimate-badge"><i class="fas fa-calculator"></i> Est.</span></dd>
                                </div>
                                <div>
                                    <dt>Mint Price</dt>
                                    <dd>75 LUNA</dd>
                                </div>
                                <div>
                                    <dt>LUNA Price</dt>
                                    <dd>$0.70 - $1.60 ⚡</dd>
                                </div>
                                <div>
                                    <dt>USD Cost</dt>
                                    <dd>$52.50 - $120.00</dd>
                                </div>
                                <div>
                                    <dt>Eligibility</dt>
                                    <dd>GP, SP, PL, GMC holders</dd>
                                </div>
                            </dl>
                            
                            <!-- Backing Bar for Phase 2a -->
                            <div class="relative mt-6">
                                <div id="phase2a-bar" class="backing-bar-container">
                                    <div class="h-full flex items-center justify-center"><i class="fas fa-spinner fa-spin spinner-small"></i></div>
                                </div>
                                <div id="phase2a-label-mint" class="backing-bar-marker" style="left: 0%; opacity: 0;">
                                    <span class="backing-bar-label">Mint: 75</span>
                                </div>
                                <div id="phase2a-label-backing" class="backing-bar-marker" style="left: 0%; opacity: 0;">
                                    <span class="backing-bar-label">Backing: <span id="phase2a-backing-value" class="backing-bar-value">...</span></span>
                                </div>
                            </div>
                            <p id="phase2a-gain-text" class="text-xs text-center text-gray-400 mt-1">Calculating gain...</p>
                        </div>
                    </div>

                    <!-- Phase 2b: Alliance/Open Mint -->
                    <div class="timeline-item pb-10">
                        <div class="timeline-dot"></div>
                        <div class="stat-card p-6 rounded-xl">
                            <p class="text-sm text-gray-400">June 1 — June 5, 2024</p>
                            <h4 class="text-xl font-bold text-white mt-1">Phase 2b: Alliance Stakers & Open Mint</h4>
                            <p class="text-gray-400 mt-2">
                                The largest and most successful mint, conducted in 3 rounds with increasing prices. Whitelisted addresses included those who staked Alliance assets on Terra, Carbon, or Migaloo. Round 3 was open to all. <strong class="text-green-400">All 1,300 NFTs sold out.</strong>
                            </p>
                            
                            <!-- Sub-rounds -->
                            <div class="mt-4 space-y-3">
                                <div class="bg-gray-800/50 rounded-lg p-3">
                                    <div class="flex justify-between items-center">
                                        <span class="text-sm text-gray-300">Round 1 <span class="text-gray-500">(June 1-2)</span></span>
                                        <span class="text-sm">100 LUNA <span class="text-gray-500">· $66.50</span></span>
                                    </div>
                                    <p class="text-xs text-gray-500 mt-1">WL only, limit 2 per address</p>
                                </div>
                                <div class="bg-gray-800/50 rounded-lg p-3">
                                    <div class="flex justify-between items-center">
                                        <span class="text-sm text-gray-300">Round 2 <span class="text-gray-500">(June 2-3)</span></span>
                                        <span class="text-sm">115 LUNA <span class="text-gray-500">· $75.90</span></span>
                                    </div>
                                    <p class="text-xs text-gray-500 mt-1">WL only, limit 3 per address</p>
                                </div>
                                <div class="bg-gray-800/50 rounded-lg p-3">
                                    <div class="flex justify-between items-center">
                                        <span class="text-sm text-gray-300">Round 3 <span class="text-gray-500">(June 3-5)</span></span>
                                        <span class="text-sm">130 LUNA <span class="text-gray-500">· $84.50</span></span>
                                    </div>
                                    <p class="text-xs text-gray-500 mt-1">Open mint, unlimited</p>
                                </div>
                            </div>

                            <dl class="phase-details">
                                <div>
                                    <dt>NFTs Sold</dt>
                                    <dd class="text-green-400">1,300 ✓</dd>
                                </div>
                                <div>
                                    <dt>Avg Mint Price</dt>
                                    <dd>~114 LUNA</dd>
                                </div>
                                <div>
                                    <dt>LUNA Price</dt>
                                    <dd>$0.65 - $0.67</dd>
                                </div>
                                <div>
                                    <dt>Avg USD Cost</dt>
                                    <dd>~$75.00</dd>
                                </div>
                                <div>
                                    <dt>LUNA Raised</dt>
                                    <dd class="text-cyan-400">148,390 LUNA</dd>
                                </div>
                                <div>
                                    <dt>Status</dt>
                                    <dd class="text-green-400">SOLD OUT</dd>
                                </div>
                            </dl>
                            
                            <!-- Backing Bar for Phase 2b -->
                            <div class="relative mt-6">
                                <div id="phase2b-bar" class="backing-bar-container">
                                    <div class="h-full flex items-center justify-center"><i class="fas fa-spinner fa-spin spinner-small"></i></div>
                                </div>
                                <div id="phase2b-label-mint" class="backing-bar-marker" style="left: 0%; opacity: 0;">
                                    <span class="backing-bar-label">Avg Mint: 114</span>
                                </div>
                                <div id="phase2b-label-backing" class="backing-bar-marker" style="left: 0%; opacity: 0;">
                                    <span class="backing-bar-label">Backing: <span id="phase2b-backing-value" class="backing-bar-value">...</span></span>
                                </div>
                            </div>
                            <p id="phase2b-gain-text" class="text-xs text-center text-gray-400 mt-1">Calculating gain...</p>
                        </div>
                    </div>

                </div>
            </div>

            <!-- DAO Security Allocations -->
            <div>
                <h3 class="text-2xl font-bold text-white mb-6">DAO Security Allocations</h3>
                <p class="text-gray-400 mb-6">
                    To protect against malicious governance attacks, NFTs were sent to a council multisig and broken. Broken NFTs can still vote in governance but no longer accrue Alliance staking rewards.
                </p>
                
                <div class="relative pl-8">
                    <div class="timeline-item pb-10">
                        <div class="timeline-dot broken"></div>
                        <div class="stat-card p-6 rounded-xl">
                            <p class="text-sm text-gray-400">~February 2024</p>
                            <h4 class="text-xl font-bold text-white mt-1">Multisig Allocation #1</h4>
                            <p class="text-gray-400 mt-2">
                                Initial security allocation to protect the DAO during its early growth phase. These NFTs were immediately broken upon receipt.
                            </p>
                            <dl class="phase-details" style="grid-template-columns: 1fr;">
                                <div>
                                    <dt>NFTs Broken</dt>
                                    <dd class="text-red-400">462</dd>
                                </div>
                            </dl>
                        </div>
                    </div>
                    
                    <div class="timeline-item">
                        <div class="timeline-dot broken"></div>
                        <div class="stat-card p-6 rounded-xl">
                            <p class="text-sm text-gray-400">June 7, 2024</p>
                            <h4 class="text-xl font-bold text-white mt-1">Multisig Allocation #2</h4>
                            <p class="text-gray-400 mt-2">
                                Additional security allocation following the successful Phase 2b mint. As the DAO grew, additional governance security was deemed necessary. Props 64-69 were passed to send these NFTs to the multisig.
                            </p>
                            <dl class="phase-details" style="grid-template-columns: 1fr;">
                                <div>
                                    <dt>NFTs Broken</dt>
                                    <dd class="text-red-400">538</dd>
                                </div>
                            </dl>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Current Distribution -->
            <div>
                <h3 class="text-2xl font-bold text-white mb-4">Current Supply Distribution</h3>
                <div class="text-gray-400 leading-relaxed space-y-4">
                    <p>The 10,000 NFTs are currently distributed as follows:</p>
                    <ul class="list-disc list-inside space-y-3 pl-4">
                        <li><strong class="text-green-400">Public Circulation: 3,172 NFTs (31.72%)</strong> — Held by the community from all mint phases.</li>
                        <li><strong class="text-white">DAO Treasury: 5,828 NFTs (58.28%)</strong> — Unbroken NFTs held for future mints, partnerships, and community initiatives.</li>
                        <li><strong class="text-red-400">DAO Held - Broken: 1,000 NFTs (10%)</strong> — Held in council multisig wallets for governance security. These no longer earn staking rewards.</li>
                    </ul>
                    <p class="text-cyan-400 pt-4 border-t border-gray-700">
                        The NFTs remaining in the treasury will be released in future phases as determined by AllianceDAO governance. Details regarding timing, pricing, and eligibility for future releases will be announced by the DAO.
                    </p>
                </div>
            </div>

            <!-- Sources -->
            <div>
                <h3 class="text-2xl font-bold text-white mb-4">Sources</h3>
                <div class="space-y-2">
                    <p>
                        <a href="https://common.xyz/terra/discussion/15252-ally-alliance-asset-proposal" target="_blank" class="source-link">
                            <i class="fas fa-external-link-alt mr-1"></i> ALLY Alliance Asset Proposal — Commonwealth
                        </a>
                    </p>
                    <p>
                        <a href="https://alliance-dao.notion.site/AllianceDAO-Growth-Proposal-ba2c8efd98314b5e9043df6820680f5d" target="_blank" class="source-link">
                            <i class="fas fa-external-link-alt mr-1"></i> AllianceDAO Growth Proposal — Notion
                        </a>
                    </p>
                </div>
            </div>

        </div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- UI ELEMENTS ---
            const liveBackingDisplayEl = document.getElementById('live-backing-display');
            
            // Snapshot elements
            const snapshotBackingEl = document.getElementById('snapshot-backing');
            const snapshotBackingUsdEl = document.getElementById('snapshot-backing-usd');
            const insightTextEl = document.getElementById('insight-text');
            
            // Phase 1b Elements
            const phase1bBar = document.getElementById('phase1b-bar');
            const phase1bLabelMint = document.getElementById('phase1b-label-mint');
            const phase1bLabelBacking = document.getElementById('phase1b-label-backing');
            const phase1bBackingValueEl = document.getElementById('phase1b-backing-value');
            const phase1bGainTextEl = document.getElementById('phase1b-gain-text');

            // Phase 2a Elements
            const phase2aBar = document.getElementById('phase2a-bar');
            const phase2aLabelMint = document.getElementById('phase2a-label-mint');
            const phase2aLabelBacking = document.getElementById('phase2a-label-backing');
            const phase2aBackingValueEl = document.getElementById('phase2a-backing-value');
            const phase2aGainTextEl = document.getElementById('phase2a-gain-text');

            // Phase 2b Elements
            const phase2bBar = document.getElementById('phase2b-bar');
            const phase2bLabelMint = document.getElementById('phase2b-label-mint');
            const phase2bLabelBacking = document.getElementById('phase2b-label-backing');
            const phase2bBackingValueEl = document.getElementById('phase2b-backing-value');
            const phase2bGainTextEl = document.getElementById('phase2b-gain-text');

            // --- MINT PRICES (Constants) ---
            const mintPrice1b = 50;
            const mintPrice2a = 75;
            const mintPrice2b = 114; // Average

            // --- Store current LUNA price globally ---
            let currentLunaPrice = null;
            let floorPriceData = null; // { amount, token, usd, source, epoch }
            let marketPriceData = null; // { usd, type: 'sale' | 'floor', source }

            // --- CoinGecko token ID mapping ---
            const tokenToCoinGeckoId = {
                'LUNA': 'terra-luna-2',
                'bLUNA': 'backbone-labs-staked-luna',
                'ampLUNA': 'eris-amplified-luna',
                'SOLID': 'solid-protocol-luna',
                'USDC': 'usd-coin',
                'USDT': 'tether'
            };

            // --- Fetch floor price from GitHub TLA data ---
            async function fetchFloorPrice() {
                const baseUrl = 'https://api.github.com/repos/defipatriot/tla_json_storage/contents';
                
                console.log('Fetching floor price from GitHub...');
                
                try {
                    // Get list of files in repo
                    const contentsResponse = await fetch(baseUrl);
                    if (!contentsResponse.ok) {
                        console.error('GitHub API response not ok:', contentsResponse.status);
                        throw new Error('Failed to fetch repo contents');
                    }
                    
                    const files = await contentsResponse.json();
                    console.log('Found files:', files.length);
                    
                    // Filter for tla-data files and parse epoch/phase
                    const tlaFiles = files
                        .filter(f => f.name.startsWith('tla-data-epoch-') && f.name.endsWith('.json'))
                        .map(f => {
                            // Parse: tla-data-epoch-165-end.json or tla-data-epoch-165-end_test.json
                            const match = f.name.match(/tla-data-epoch-(\d+)-(\w+)(?:_test)?\.json/);
                            if (!match) return null;
                            
                            const epoch = parseInt(match[1]);
                            const phase = match[2]; // start, middle, end
                            const phaseOrder = { 'start': 1, 'middle': 2, 'end': 3 };
                            
                            return {
                                name: f.name,
                                download_url: f.download_url,
                                epoch: epoch,
                                phase: phase,
                                phaseOrder: phaseOrder[phase] || 0
                            };
                        })
                        .filter(f => f !== null);
                    
                    console.log('TLA files found:', tlaFiles.length, tlaFiles.map(f => f.name));
                    
                    // Sort by epoch (desc) then phase order (desc) to get most recent
                    tlaFiles.sort((a, b) => {
                        if (b.epoch !== a.epoch) return b.epoch - a.epoch;
                        return b.phaseOrder - a.phaseOrder;
                    });
                    
                    if (tlaFiles.length === 0) {
                        console.error('No TLA data files found');
                        throw new Error('No TLA data files found');
                    }
                    
                    // Fetch the most recent file
                    const latestFile = tlaFiles[0];
                    console.log('Using file:', latestFile.name);
                    
                    const dataResponse = await fetch(latestFile.download_url);
                    if (!dataResponse.ok) {
                        console.error('Failed to fetch TLA data file:', dataResponse.status);
                        throw new Error('Failed to fetch TLA data');
                    }
                    
                    const tlaData = await dataResponse.json();
                    console.log('TLA data loaded successfully');
                    
                    // Extract floor prices from BBL and Boost
                    const bblFloor = tlaData?.nft_stats?.marketplaces?.bbl?.floor_price?.unbroken;
                    const boostFloor = tlaData?.nft_stats?.marketplaces?.boost?.floor_price?.unbroken;
                    
                    // Extract recent sales (unbroken only)
                    const bblSales = (tlaData?.nft_stats?.marketplaces?.bbl?.epoch_sales || [])
                        .filter(s => s.broken === false && s.usd > 0);
                    const boostSales = (tlaData?.nft_stats?.marketplaces?.boost?.epoch_sales || [])
                        .filter(s => s.broken === false && s.usd > 0);
                    const allSales = [...bblSales, ...boostSales];
                    
                    console.log('Recent unbroken sales:', allSales.length);
                    
                    console.log('BBL floor:', bblFloor);
                    console.log('Boost floor:', boostFloor);
                    
                    // Collect valid floors
                    const floors = [];
                    if (bblFloor && bblFloor.amount > 0 && bblFloor.usd > 0) {
                        floors.push({ ...bblFloor, source: 'BBL' });
                    }
                    if (boostFloor && boostFloor.amount > 0 && boostFloor.usd > 0) {
                        floors.push({ ...boostFloor, source: 'Boost' });
                    }
                    
                    // Find the lowest by USD (snapshot price)
                    if (floors.length > 0) {
                        floors.sort((a, b) => a.usd - b.usd);
                        const cheapest = floors[0];
                        
                        console.log('Cheapest floor:', cheapest);
                        
                        floorPriceData = {
                            amount: cheapest.amount,
                            token: cheapest.token,
                            usd: cheapest.usd, // Snapshot USD as fallback
                            source: cheapest.source,
                            epoch: latestFile.epoch
                        };
                        
                        // Update UI with snapshot data first
                        updateFloorPriceUI();
                        
                        // Determine market price (recent sale or floor)
                        if (allSales.length > 0) {
                            // Use most recent sale (or average of recent sales)
                            const recentSale = allSales[0]; // Assuming sorted by recency
                            marketPriceData = {
                                usd: recentSale.usd,
                                amount: recentSale.amount,
                                token: recentSale.token,
                                type: 'sale',
                                source: `Recent Sale`
                            };
                            console.log('Using recent sale for market price:', marketPriceData);
                        } else {
                            // Use floor price
                            marketPriceData = {
                                usd: floorPriceData.usd,
                                amount: floorPriceData.amount,
                                token: floorPriceData.token,
                                type: 'floor',
                                source: `Floor Price`
                            };
                            console.log('Using floor for market price:', marketPriceData);
                        }
                        
                        // Then fetch live token prices
                        await fetchLiveTokenPrice();
                        
                        // Also fetch live price for market token if different
                        if (marketPriceData && marketPriceData.token !== floorPriceData.token) {
                            await fetchMarketTokenPrice();
                        } else if (marketPriceData && floorPriceData.liveTokenPrice) {
                            // Use same live price as floor
                            marketPriceData.liveTokenPrice = floorPriceData.liveTokenPrice;
                            marketPriceData.liveUsd = marketPriceData.amount * floorPriceData.liveTokenPrice;
                        }
                    } else {
                        console.warn('No valid floor prices found');
                        floorPriceData = { amount: 0, token: 'USD', usd: 43, source: 'Estimate', epoch: null };
                        updateFloorPriceUI();
                    }
                    
                } catch (error) {
                    console.error('Failed to fetch floor price:', error);
                    floorPriceData = { amount: 0, token: 'USD', usd: 43, source: 'Estimate', epoch: null };
                    updateFloorPriceUI();
                }
            }
            
            // --- Fetch live token price from CoinGecko ---
            async function fetchLiveTokenPrice() {
                if (!floorPriceData || !floorPriceData.token) return;
                
                const coinGeckoId = tokenToCoinGeckoId[floorPriceData.token];
                if (!coinGeckoId) {
                    console.warn(`No CoinGecko ID for token: ${floorPriceData.token}`);
                    return;
                }
                
                try {
                    const response = await fetch(`https://api.coingecko.com/api/v3/simple/price?ids=${coinGeckoId}&vs_currencies=usd`);
                    if (!response.ok) throw new Error('CoinGecko request failed');
                    
                    const data = await response.json();
                    const livePrice = data?.[coinGeckoId]?.usd;
                    
                    if (livePrice) {
                        floorPriceData.liveTokenPrice = livePrice;
                        floorPriceData.liveUsd = floorPriceData.amount * livePrice;
                        updateFloorPriceUI();
                    }
                } catch (error) {
                    console.error('Failed to fetch live token price:', error);
                }
            }
            
            // --- Update floor price UI ---
            function updateFloorPriceUI() {
                const floorEl = document.getElementById('snapshot-floor');
                const floorSourceEl = document.getElementById('snapshot-floor-source');
                
                if (!floorPriceData) return;
                
                if (floorEl) {
                    const displayUsd = floorPriceData.liveUsd || floorPriceData.usd;
                    const tokenDisplay = floorPriceData.token !== 'USD' 
                        ? `<span class="text-sm font-normal text-gray-400">(${floorPriceData.amount} ${floorPriceData.token})</span>`
                        : '';
                    floorEl.innerHTML = `~$${displayUsd.toFixed(2)} ${tokenDisplay}`;
                }
                
                if (floorSourceEl) {
                    if (floorPriceData.source && floorPriceData.epoch) {
                        const priceType = floorPriceData.liveUsd ? 'Live' : 'Snapshot';
                        floorSourceEl.textContent = `${floorPriceData.source} · Epoch ${floorPriceData.epoch} · ${priceType}`;
                    } else {
                        floorSourceEl.textContent = 'Manual estimate';
                    }
                }
            }
            
            // --- Get current floor price in USD ---
            function getFloorPriceUsd() {
                if (!floorPriceData) return 43; // fallback
                return floorPriceData.liveUsd || floorPriceData.usd || 43;
            }
            
            // --- Get market price data (recent sale or floor) ---
            function getMarketPriceData() {
                if (!marketPriceData) {
                    // Use floor price data if available, otherwise fallback
                    if (floorPriceData) {
                        return { 
                            usd: floorPriceData.liveUsd || floorPriceData.usd, 
                            amount: floorPriceData.amount,
                            token: floorPriceData.token,
                            type: 'floor', 
                            source: 'Floor Price' 
                        };
                    }
                    return { usd: 43, amount: '?', token: 'USD', type: 'floor', source: 'Estimate' };
                }
                // If we have live token price for this token, recalculate
                if (marketPriceData.liveUsd) {
                    return { ...marketPriceData, usd: marketPriceData.liveUsd };
                }
                return marketPriceData;
            }
            
            // --- Fetch live price for market data token ---
            async function fetchMarketTokenPrice() {
                if (!marketPriceData || !marketPriceData.token) return;
                
                const coinGeckoId = tokenToCoinGeckoId[marketPriceData.token];
                if (!coinGeckoId) {
                    console.warn(`No CoinGecko ID for market token: ${marketPriceData.token}`);
                    return;
                }
                
                try {
                    const response = await fetch(`https://api.coingecko.com/api/v3/simple/price?ids=${coinGeckoId}&vs_currencies=usd`);
                    if (!response.ok) throw new Error('CoinGecko request failed');
                    
                    const data = await response.json();
                    const livePrice = data?.[coinGeckoId]?.usd;
                    
                    if (livePrice) {
                        marketPriceData.liveTokenPrice = livePrice;
                        marketPriceData.liveUsd = marketPriceData.amount * livePrice;
                        console.log('Market price updated with live token price:', marketPriceData.liveUsd);
                    }
                } catch (error) {
                    console.error('Failed to fetch live market token price:', error);
                }
            }

            // --- API Fetch Function ---
            async function fetchLiveBacking() {
                const contractRewardsQuery = btoa(JSON.stringify({ all_nft_info: { token_id: "9068" } }));
                const contractUrl = `https://terra.publicnode.com/cosmwasm/wasm/v1/contract/terra1phr9fngjv7a8an4dhmhd0u0f98wazxfnzccqtyheq4zqrrp4fpuqw3apw9/smart/${contractRewardsQuery}`;
                const ampLunaRateQuery = btoa(JSON.stringify({ exchange_rates: {} }));
                const ampLunaRateUrl = `https://terra.publicnode.com/cosmwasm/wasm/v1/contract/terra10788fkzah89xrdm27zkj5yvhj9x3494lxawzm5qq3vvxcqz2yzaqyd3enk/smart/${ampLunaRateQuery}`;
                const coingeckoUrl = 'https://api.coingecko.com/api/v3/simple/price?ids=terra-luna-2&vs_currencies=usd';

                try {
                    const [contractResponse, ampLunaRateResponse, coingeckoResponse] = await Promise.all([
                        fetch(contractUrl).catch(e => { console.error("Contract Fetch Error:", e); return null; }),
                        fetch(ampLunaRateUrl).catch(e => { console.error("ampLUNA Rate Fetch Error:", e); return null; }),
                        fetch(coingeckoUrl).catch(e => { console.error("CoinGecko Fetch Error:", e); return null; })
                    ]);

                    if (!contractResponse?.ok || !ampLunaRateResponse?.ok) {
                        throw new Error("One or more API requests failed");
                    }

                    const contractJson = await contractResponse.json();
                    const ampLunaRateData = await ampLunaRateResponse.json();
                    
                    // Get LUNA price from CoinGecko
                    if (coingeckoResponse?.ok) {
                        const coingeckoData = await coingeckoResponse.json();
                        currentLunaPrice = coingeckoData?.['terra-luna-2']?.usd || null;
                    }

                    const rewardsAttribute = contractJson?.data?.info?.extension?.attributes?.find(attr => attr.trait_type === 'rewards');
                    const rewardsValue = rewardsAttribute?.value;
                    const liveAmpLunaBacking = rewardsValue ? Number(rewardsValue) / 1000000 : 0;
                    const ampLunaToLunaRate = parseFloat(ampLunaRateData?.data?.exchange_rates?.[0]?.[1]);
                    
                    if (isNaN(ampLunaToLunaRate)) {
                        throw new Error("Invalid ampLUNA exchange rate");
                    }
                    
                    const backingInLunaLive = liveAmpLunaBacking * ampLunaToLunaRate;
                    
                    updateAllBars(backingInLunaLive);

                    // Update main backing display
                    if (liveBackingDisplayEl) {
                        let displayText = `${backingInLunaLive.toFixed(4)} LUNA`;
                        if (currentLunaPrice) {
                            const backingUsd = backingInLunaLive * currentLunaPrice;
                            displayText += ` ($${backingUsd.toFixed(2)})`;
                        }
                        liveBackingDisplayEl.textContent = displayText;
                    }
                    
                    // Update snapshot section
                    if (snapshotBackingEl) {
                        snapshotBackingEl.textContent = `${backingInLunaLive.toFixed(2)} LUNA`;
                    }
                    if (snapshotBackingUsdEl && currentLunaPrice) {
                        const backingUsd = backingInLunaLive * currentLunaPrice;
                        snapshotBackingUsdEl.textContent = `≈ $${backingUsd.toFixed(2)} USD @ $${currentLunaPrice.toFixed(4)}/LUNA`;
                    }
                    
                    // Update insight text
                    if (insightTextEl && currentLunaPrice) {
                        const backingUsd = backingInLunaLive * currentLunaPrice;
                        const floor = getFloorPriceUsd();
                        
                        if (backingUsd >= floor * 0.9) {
                            insightTextEl.innerHTML = `Current backing value <strong class="text-cyan-400">($${backingUsd.toFixed(2)})</strong> is comparable to floor price <strong>(~$${floor.toFixed(2)})</strong>. Buying at floor today offers similar value to early minters who paid <strong>$32-$85</strong>.`;
                        } else {
                            const backingPercent = ((backingUsd / floor) * 100).toFixed(0);
                            insightTextEl.innerHTML = `Backing alone covers <strong class="text-cyan-400">${backingPercent}%</strong> of floor price. Each NFT holds <strong>${backingInLunaLive.toFixed(2)} LUNA</strong> that continues to grow via Alliance staking rewards.`;
                        }
                    }

                } catch (error) {
                    console.error("Failed to fetch or process live backing data:", error);
                    updateAllBars(null);

                    if (liveBackingDisplayEl) {
                        liveBackingDisplayEl.textContent = "Error Fetching LUNA";
                        liveBackingDisplayEl.classList.remove('text-cyan-400');
                        liveBackingDisplayEl.classList.add('text-red-400');
                    }
                }
            }

            // --- MINT COSTS IN USD (at time of mint) ---
            const mintCostUsd1b = { low: 32.50, high: 35.00 };  // 50 LUNA @ $0.65-$0.70
            const mintCostUsd2a = { low: 52.50, high: 120.00 }; // 75 LUNA @ $0.70-$1.60
            const mintCostUsd2b = { low: 66.50, high: 84.50 };  // 100-130 LUNA @ $0.65-$0.67

            // --- UPDATE ALL BARS ---
            function updateAllBars(liveLunaBacking) {
                updateBar(phase1bBar, phase1bLabelMint, phase1bLabelBacking, phase1bBackingValueEl, phase1bGainTextEl, mintPrice1b, liveLunaBacking, mintCostUsd1b);
                updateBar(phase2aBar, phase2aLabelMint, phase2aLabelBacking, phase2aBackingValueEl, phase2aGainTextEl, mintPrice2a, liveLunaBacking, mintCostUsd2a);
                updateBar(phase2bBar, phase2bLabelMint, phase2bLabelBacking, phase2bBackingValueEl, phase2bGainTextEl, mintPrice2b, liveLunaBacking, mintCostUsd2b);
            }

            // --- GENERIC BAR UPDATE FUNCTION ---
            function updateBar(barEl, labelMintEl, labelBackingEl, backingValueEl, gainTextEl, mintPrice, liveLunaBacking, mintCostUsd) {
                if (!barEl || !labelMintEl || !labelBackingEl || !backingValueEl || !gainTextEl) return;

                const isError = typeof liveLunaBacking !== 'number';

                if (isError) {
                    barEl.innerHTML = `<div class="h-full flex items-center justify-center text-xs text-red-400">Error</div>`;
                    labelMintEl.style.opacity = '0';
                    labelBackingEl.style.opacity = '0';
                    gainTextEl.textContent = 'Error calculating gain.';
                    gainTextEl.className = 'text-xs text-center text-red-400 mt-1';
                    return;
                }

                const minScale = Math.min(mintPrice, liveLunaBacking) * 0.8;
                const maxScale = Math.max(mintPrice, liveLunaBacking) * 1.1;
                const range = maxScale - minScale;
                if (range <= 0) return;

                const perc = (value) => Math.max(0, Math.min(100, ((value - minScale) / range) * 100));

                const mintPerc = perc(mintPrice);
                const backingPerc = perc(liveLunaBacking);
                const gainLuna = liveLunaBacking - mintPrice;

                barEl.innerHTML = '';

                if (gainLuna < 0) {
                    barEl.innerHTML = `<div class="backing-bar-segment bg-red-500 rounded-l-full" style="width: ${backingPerc}%;"></div>`;
                } else {
                    barEl.innerHTML = `
                        <div class="backing-bar-segment bg-blue-500 rounded-l-full" style="width: ${mintPerc}%;"></div>
                        <div class="backing-bar-segment bg-green-500 rounded-r-full" style="width: ${backingPerc - mintPerc}%;"></div>
                    `;
                }

                labelMintEl.style.left = `${mintPerc}%`;
                labelBackingEl.style.left = `${backingPerc}%`;
                backingValueEl.textContent = liveLunaBacking.toFixed(2);
                labelMintEl.style.opacity = '1';
                labelBackingEl.style.opacity = '1';

                // LUNA gain/loss
                const gainLunaColor = gainLuna >= 0 ? 'text-green-400' : 'text-red-400';
                const gainLunaSign = gainLuna >= 0 ? '+' : '';

                // Build comparison display
                let comparisonHtml = '';
                
                if (currentLunaPrice && mintCostUsd) {
                    const heldLunaValueUsd = mintPrice * currentLunaPrice;
                    const backingValueUsd = liveLunaBacking * currentLunaPrice;
                    const backingBonusLuna = liveLunaBacking - mintPrice;
                    const backingBonusUsd = backingValueUsd - heldLunaValueUsd;
                    
                    // Calculate ROI vs mint cost (using average mint cost)
                    const avgMintCostUsd = (mintCostUsd.low + mintCostUsd.high) / 2;
                    
                    // NFT ROI (backing value vs what they paid)
                    const roiNftUsd = ((backingValueUsd - avgMintCostUsd) / avgMintCostUsd) * 100;
                    const roiNftColor = roiNftUsd >= 0 ? 'text-green-400' : 'text-red-400';
                    const roiNftSign = roiNftUsd >= 0 ? '+' : '';
                    
                    // LUNA ROI (if they just held the LUNA they spent)
                    const roiLunaUsd = ((heldLunaValueUsd - avgMintCostUsd) / avgMintCostUsd) * 100;
                    const roiLunaColor = roiLunaUsd >= 0 ? 'text-green-400' : 'text-red-400';
                    const roiLunaSign = roiLunaUsd >= 0 ? '+' : '';
                    
                    // Difference (how much better NFT performed)
                    const roiDiff = roiNftUsd - roiLunaUsd;
                    const roiDiffColor = roiDiff >= 0 ? 'text-green-400' : 'text-red-400';
                    const roiDiffSign = roiDiff >= 0 ? '+' : '';
                    
                    // Market ROI (based on recent sale or floor price)
                    const market = getMarketPriceData();
                    const roiMarketUsd = ((market.usd - avgMintCostUsd) / avgMintCostUsd) * 100;
                    const roiMarketColor = roiMarketUsd >= 0 ? 'text-green-400' : 'text-red-400';
                    const roiMarketSign = roiMarketUsd >= 0 ? '+' : '';
                    const marketLabel = market.type === 'sale' ? 'Recent Sale' : 'Floor Price';
                    const marketPriceType = market.liveUsd ? 'Live' : 'Snapshot';
                    const marketDetails = `${market.amount} ${market.token}`;
                    const saleIndicator = market.type === 'sale' ? '✓ ' : '';
                    
                    comparisonHtml = `
                        <div class="bg-gray-800/50 rounded-lg p-3 mt-3 text-xs space-y-2">
                            <div class="flex justify-between items-center pb-2 border-b border-gray-700">
                                <span class="text-gray-400">Paid at mint:</span>
                                <span class="text-gray-300">${mintPrice} LUNA <span class="text-gray-500">($${mintCostUsd.low.toFixed(2)} - $${mintCostUsd.high.toFixed(2)})</span></span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-gray-400">If held ${mintPrice} LUNA:</span>
                                <span class="text-gray-300">$${heldLunaValueUsd.toFixed(2)} <span class="text-gray-500">today</span></span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-gray-400">NFT backing value:</span>
                                <span class="text-cyan-400 font-medium">${liveLunaBacking.toFixed(2)} LUNA <span class="text-gray-500">($${backingValueUsd.toFixed(2)})</span></span>
                            </div>
                            <div class="flex justify-between items-center pt-2 border-t border-gray-700">
                                <span class="text-gray-400">Backing bonus:</span>
                                <span class="${gainLunaColor} font-semibold">${gainLunaSign}${backingBonusLuna.toFixed(2)} LUNA (${gainLunaSign}$${Math.abs(backingBonusUsd).toFixed(2)})</span>
                            </div>
                            <div class="flex justify-between items-center pt-2 border-t border-gray-700">
                                <span class="text-gray-400">ROI (Backing):</span>
                                <span>
                                    <span class="text-gray-500">NFT:</span> <span class="${roiNftColor} font-bold">${roiNftSign}${roiNftUsd.toFixed(1)}%</span>
                                    <span class="text-gray-600 mx-1">|</span>
                                    <span class="text-gray-500">LUNA:</span> <span class="${roiLunaColor} font-bold">${roiLunaSign}${roiLunaUsd.toFixed(1)}%</span>
                                    <span class="${roiDiffColor} font-semibold ml-2">(${roiDiffSign}${roiDiff.toFixed(1)}%)</span>
                                </span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-gray-400">ROI (${marketLabel}):</span>
                                <span class="${roiMarketColor} font-bold">${saleIndicator}${roiMarketSign}${roiMarketUsd.toFixed(1)}% <span class="text-gray-500 font-normal">($${market.usd.toFixed(2)} · ${marketDetails})</span></span>
                            </div>
                        </div>
                    `;
                } else {
                    // Fallback - just show LUNA comparison
                    comparisonHtml = `
                        <div class="text-center mt-2">
                            <span class="text-gray-400">Backing vs Mint:</span>
                            <span class="${gainLunaColor} font-semibold ml-2">${gainLunaSign}${gainLuna.toFixed(2)} LUNA</span>
                        </div>
                    `;
                }

                gainTextEl.innerHTML = comparisonHtml;
                gainTextEl.className = 'text-xs';
            }

            // --- INITIALIZE ---
            async function init() {
                // Fetch floor price first (needed for ROI calculations)
                try {
                    await fetchFloorPrice();
                } catch (err) {
                    console.error('Floor price fetch failed:', err);
                    floorPriceData = { amount: 0, token: 'USD', usd: 43, source: 'Estimate', epoch: null };
                    marketPriceData = { amount: 0, token: 'USD', usd: 43, type: 'floor', source: 'Estimate' };
                    updateFloorPriceUI();
                }
                
                // Then fetch backing data
                await fetchLiveBacking();
            }
            init();
        });
    </script>

</body>
</html>
