<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AllianceDAO NFT Explorer | Terra Blockchain</title>
    
    <!-- Favicons -->
    <link rel="icon" type="image/x-icon" href="https://raw.githubusercontent.com/defipatriot/aDAO-Image-Files/main/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="https://raw.githubusercontent.com/defipatriot/aDAO-Image-Files/main/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://raw.githubusercontent.com/defipatriot/aDAO-Image-Files/main/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="https://raw.githubusercontent.com/defipatriot/aDAO-Image-Files/main/apple-touch-icon.png">
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Explore the AllianceDAO NFT collection on Terra blockchain. View rarity rankings, filter by traits, track wallet holdings, and discover matching trait NFTs.">
    <meta name="keywords" content="AllianceDAO, NFT, Terra, Luna, Blockchain, NFT Explorer, Rarity, BackBone Labs">
    <meta property="og:title" content="AllianceDAO NFT Explorer | Terra Blockchain">
    <meta property="og:description" content="Explore 10,000 unique AllianceDAO NFTs. View rarity rankings, filter by traits, and track wallet holdings.">
    <meta property="og:image" content="https://raw.githubusercontent.com/defipatriot/aDAO-Image-Files/main/android-chrome-512x512.png">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="AllianceDAO NFT Explorer">
    <meta name="twitter:description" content="Explore 10,000 unique AllianceDAO NFTs on Terra blockchain.">
    <meta name="twitter:image" content="https://raw.githubusercontent.com/defipatriot/aDAO-Image-Files/main/android-chrome-512x512.png">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Vercel Analytics -->
    <script>
     window.va = window.va || function () { (window.va.q = window.va.q || []).push(arguments); };
    </script>
    <script src="/_vercel/insights/script.js" defer></script>

    <link rel="stylesheet" href="nft-explorer-style.css">

</head>
<body class="bg-gray-900 p-4 sm:p-8">

    <!-- Mobile Notice Banner - dismissible -->
    <div id="mobile-notice" class="hidden fixed top-0 left-0 right-0 bg-gradient-to-r from-cyan-600 to-teal-600 text-white text-center py-2 px-10 z-50 shadow-lg">
        <p class="text-xs font-medium">üì± Mobile version in progress. Best viewed on desktop.</p>
        <button id="mobile-notice-close" class="absolute right-3 top-1/2 -translate-y-1/2 text-white hover:text-gray-200 text-2xl font-bold leading-none p-1">&times;</button>
    </div>

    <header class="max-w-screen-2xl mx-auto mb-8 flex flex-col sm:flex-row justify-between items-center gap-4">
        <a href="https://www.thealliancedao.com/" rel="noopener noreferrer" class="flex-shrink-0">
            <img src="https://raw.githubusercontent.com/defipatriot/aDAO-Image-Files/main/Alliance%20DAO%20Logo.png" alt="Alliance DAO Logo" class="h-10 sm:h-12 w-auto">
        </a>
        <div class="flex rounded-lg border-2 border-gray-600 overflow-hidden w-full sm:w-96 max-w-sm">
            <button id="collection-view-btn" class="view-toggle-btn active flex-1">Collection</button>
            <button id="wallet-view-btn" class="view-toggle-btn flex-1">Wallet</button>
            <button id="map-view-btn" class="view-toggle-btn flex-1">Map</button>
        </div>
        <img src="https://raw.githubusercontent.com/defipatriot/aDAO-Image-Planets-Empty/main/Terra.PNG" alt="Terra Logo" class="h-10 sm:h-12 w-auto hidden sm:block">
    </header>

    <main class="max-w-screen-2xl mx-auto">
        
        <div id="collection-view">
            <div id="controls" class="p-4 bg-gray-800/50 rounded-lg border border-gray-700">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 items-end mb-4">
                    <div>
                        <label for="search-id" class="block text-sm font-medium text-gray-300 mb-1">Search by ID</label>
                        <input type="number" id="search-id" placeholder="Enter NFT ID..." class="form-input w-full">
                    </div>
                    <div>
                        <label for="sort-rank" class="block text-sm font-medium text-gray-300 mb-1">Sort By</label>
                        <select id="sort-rank" class="form-select w-full">
                            <option value="desc" selected>Rarity: High to Low</option>
                            <option value="asc">Rarity: Low to High</option>
                            <option value="id">ID</option>
                        </select>
                    </div>
                </div>
                
                <!-- Address Search Row - separate on mobile -->
                <div class="mt-4">
                    <label for="search-address" class="block text-sm font-medium text-gray-300 mb-1">Search by Address</label>
                    <div class="flex flex-col sm:flex-row gap-2">
                        <div class="flex items-center gap-2 flex-1">
                            <button id="address-direction-toggle" class="control-btn h-10 flex-shrink-0 w-16 text-xs font-mono" title="Toggle search direction">...cba</button>
                            <input type="text" id="search-address" placeholder="Type from end" class="form-input flex-1 min-w-0" style="text-align: right;">
                        </div>
                        <div class="flex items-center gap-2">
                            <select id="address-dropdown" class="form-select flex-1 sm:flex-initial sm:w-32">
                                <option value="">Holders</option>
                            </select>
                            <button id="copy-address-btn" class="control-btn h-10 flex-shrink-0" title="Copy Address">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
                            </button>
                        </div>
                    </div>
                    <div id="address-suggestions" class="address-suggestions hidden"></div>
                </div>
                
                <!-- Amount and Reset Row -->
                <div class="flex justify-between items-end gap-4 mt-4">
                    <div class="text-center">
                        <label class="block text-sm font-medium text-gray-300 mb-1">AMOUNT</label>
                        <div id="results-count" class="h-10 bg-gray-900/50 rounded-lg flex items-center justify-center border border-gray-700 text-lg font-semibold text-cyan-400 whitespace-nowrap px-4"></div>
                    </div>
                    <div>
                       <button id="reset-filters" class="control-btn h-10">Reset</button>
                    </div>
                </div>


                 <div class="mt-6 pt-4 border-t border-gray-700">
                    <div id="toggle-status-filters" class="flex justify-between items-center cursor-pointer">
                        <h3 class="filter-section-title !mb-0">Status Filters</h3>
                        <svg id="status-arrow" class="w-5 h-5 text-gray-400 transition-transform md:hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </div>
                    <div id="status-filters-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-y-4 gap-x-6 mt-4"></div>
                    <div id="status-filters-extra" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-y-4 gap-x-6 mt-4">
                        <div id="mint-status-container"></div>
                        <div class="flex items-center justify-between">
                            <label class="flex items-center cursor-pointer">
                                <input type="checkbox" id="matching-traits-toggle" class="toggle-checkbox">
                                <span class="toggle-switch mr-2"></span>
                                <span class="text-sm text-gray-300">Matching Traits</span>
                            </label>
                            <div class="flex flex-col items-center ml-4">
                                <span id="matching-traits-count" class="text-xs text-gray-400 h-4"></span>
                                <div class="direction-slider-container">
                                    <span class="text-xs text-gray-400" title="Planet + Inhabitant">P+I</span>
                                    <input type="range" min="0" max="1" value="0" class="direction-slider" id="matching-traits-slider" disabled>
                                    <span class="text-xs text-gray-400" title="Planet + Inhabitant + Object">P+I+O</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="mt-6 pt-4 border-t border-gray-700">
                    <div id="toggle-inhabitant-filters" class="flex justify-between items-center cursor-pointer">
                        <h3 class="filter-section-title !mb-0">Inhabitant Filters</h3>
                        <svg id="inhabitant-arrow" class="w-5 h-5 text-gray-400 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </div>
                    <div id="inhabitant-filters-container" class="hidden grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-y-4 gap-x-6 mt-4"></div>
                </div>

                <div class="mt-6 pt-4 border-t border-gray-700">
                     <div id="toggle-planet-filters" class="flex justify-between items-center cursor-pointer">
                        <h3 class="filter-section-title !mb-0">Planet Filters</h3>
                        <svg id="planet-arrow" class="w-5 h-5 text-gray-400 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </div>
                    <div id="planet-filters-container" class="hidden grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-y-4 gap-x-6 mt-4"></div>
                </div>

                <div id="trait-filters-container" class="mt-6 pt-4 border-t border-gray-700 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"></div>
        
                <div class="mt-6 pt-4 border-t border-gray-700">
                    <label class="filter-section-title">Display Options</label>
                    <div id="trait-toggles-container" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-x-4 gap-y-2"></div>
                </div>
            </div>
            
            <div id="nft-gallery" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6 min-h-[500px] mt-8"></div>
            <div id="pagination-controls" class="flex justify-center items-center mt-8 space-x-4"></div>
        </div>

        <div id="wallet-view" class="hidden">
            <div class="p-4 bg-gray-800/50 rounded-lg border border-gray-700 mb-8">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 items-end">
                    <div class="relative md:col-span-2">
                        <label for="wallet-search-address" class="block text-sm font-medium text-gray-300 mb-1">Search by Address</label>
                        <div class="flex items-center gap-2">
                            <button id="wallet-address-direction-toggle" class="control-btn h-10 flex-shrink-0 w-20 text-xs font-mono" title="Toggle search direction">...cba</button>
                            <input type="text" id="wallet-search-address" placeholder="Type from end (last char first)" class="form-input w-full" style="text-align: right;">
                            <button id="wallet-copy-address-btn" class="control-btn h-10 flex-shrink-0" title="Copy Address">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
                            </button>
                        </div>
                        <div id="wallet-address-suggestions" class="address-suggestions hidden"></div>
                    </div>
                    <div class="flex justify-end items-end">
                        <button id="wallet-reset-btn" class="control-btn h-10">Reset</button>
                    </div>
                </div>
            </div>

            <div class="space-y-8">
                <div>
                    <h2 class="text-2xl font-bold text-white mb-4">Holder Leaderboard</h2>
                    
                    <!-- Selected wallet details - shown on mobile when a wallet is selected -->
                    <div id="selected-wallet-details" class="hidden mb-4 p-4 bg-gray-800/70 rounded-lg border border-cyan-500/50">
                        <div class="flex justify-between items-center mb-2">
                            <span id="selected-wallet-address" class="text-cyan-400 font-mono text-sm truncate flex-1"></span>
                            <button id="clear-selected-wallet" class="text-gray-400 hover:text-white text-lg">&times;</button>
                        </div>
                        <div id="selected-wallet-stats" class="grid grid-cols-3 gap-2 text-center text-xs">
                            <!-- Stats will be populated by JS -->
                        </div>
                    </div>
                    
                    <div id="leaderboard-table">
                        </div>
                    <div id="leaderboard-pagination" class="flex justify-center items-center mt-4 space-x-4"></div>
                </div>
                <div>
                    <div id="wallet-trait-toggles-container" class="flex flex-wrap gap-x-4 gap-y-2 justify-center mb-4 p-4 bg-gray-800/50 rounded-lg border border-gray-700"></div>
                    <div id="wallet-status-filters" class="flex flex-wrap gap-x-6 gap-y-2 justify-center mb-4 p-3 bg-gray-800/30 rounded-lg border border-gray-600">
                        <label class="flex items-center cursor-pointer text-sm text-gray-300">
                            <input type="checkbox" class="toggle-checkbox wallet-status-filter" data-status="liquid" >
                            <span class="toggle-switch mr-2"></span>
                            <span>Liquid</span>
                        </label>
                        <label class="flex items-center cursor-pointer text-sm text-gray-300">
                            <input type="checkbox" class="toggle-checkbox wallet-status-filter" data-status="staked" >
                            <span class="toggle-switch mr-2"></span>
                            <span>Staked</span>
                        </label>
                        <label class="flex items-center cursor-pointer text-sm text-gray-300">
                            <input type="checkbox" class="toggle-checkbox wallet-status-filter" data-status="broken" >
                            <span class="toggle-switch mr-2"></span>
                            <span>Broken</span>
                        </label>
                        <label class="flex items-center cursor-pointer text-sm text-gray-300">
                            <input type="checkbox" class="toggle-checkbox wallet-status-filter" data-status="listed" >
                            <span class="toggle-switch mr-2"></span>
                            <span>Listed</span>
                        </label>
                    </div>
                     <h2 id="wallet-gallery-title" class="text-2xl font-bold text-white mb-4">Wallet NFTs</h2>
                    <div id="wallet-gallery" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6 min-h-[200px]"></div>
                </div>
            </div>
        </div>

        <div id="map-view" class="hidden">
            <canvas id="space-canvas"></canvas>
        </div>
    </main>

    <footer class="text-center mt-12 space-x-6">
        <button id="rarity-explained-btn" class="text-red-500 font-bold hover:text-red-400 transition-colors underline">Rarity Explained</button>
        <button id="sorting-explained-btn" class="text-green-400 font-bold hover:text-green-300 transition-colors underline">Sorting Explained</button>
        <button id="badges-explained-btn" class="text-cyan-400 font-bold hover:text-cyan-300 transition-colors underline">Badges Explained</button>
    </footer>
    <div class="mt-6 text-xs text-gray-500 max-w-3xl mx-auto text-center">
        <p>
            NFT status and ownership data is generously provided by <a href="https://deving.zone/" target="_blank" rel="noopener noreferrer" class="underline hover:text-gray-300">deving.zone</a>. We are incredibly grateful for their contribution to the community.
        </p>
        <p class="mt-2">
            Disclaimer: This data is updated periodically and may not reflect live market conditions. While we strive for accuracy, all information is provided "as is" without warranty of any kind. Please verify data independently before making any financial decisions.
        </p>
    </div>

    <div id="copy-toast">Copied!</div>

    <div id="preview-tile" class="hidden fixed bg-gray-800 border border-cyan-400 rounded-lg shadow-lg p-2 z-20 pointer-events-none">
        <div class="flex gap-2">
            <div id="preview-container-1">
                <img id="preview-image-1" src="" class="w-32 h-auto rounded-md" alt="Preview 1">
                <p id="preview-name-1" class="text-xs text-center mt-1 truncate text-white"></p>
            </div>
            <div id="preview-container-2" class="hidden">
                <img id="preview-image-2" src="" class="w-32 h-auto rounded-md" alt="Preview 2">
                <p id="preview-name-2" class="text-xs text-center mt-1 truncate text-white"></p>
            </div>
        </div>
    </div>

    <div id="nft-modal" class="modal-backdrop hidden">
        <div class="modal-content" style="width: 500px;">
            <svg id="modal-close" class="modal-close-btn w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            <div class="flex flex-col items-center text-center">
                <h2 id="modal-title" class="text-2xl font-bold text-white mb-4"></h2>
                <img id="modal-image" src="" class="w-full max-w-sm h-auto rounded-lg border border-gray-600 mb-4" alt="NFT Image">
                <div class="w-full max-w-sm">
                    <div id="modal-traits" class="space-y-2 mb-4 text-left"></div>
                    <div class="flex items-center justify-center gap-4 mb-4">
                        <a id="modal-link" href="#" target="_blank" class="inline-block text-cyan-400 hover:text-cyan-300 transition-colors">View on IPFS &rarr;</a>
                        <button id="download-post-btn" class="control-btn">Download Post</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="rarity-modal" class="modal-backdrop hidden">
        <div class="modal-content text-gray-300" style="max-width: 900px;">
            <svg id="rarity-modal-close" class="modal-close-btn w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            <h2 class="text-2xl font-bold text-white mb-4">AllianceDAO NFT Rarity: Complete Guide</h2>
            <div class="space-y-6 text-sm leading-relaxed">
                
                <div class="bg-cyan-900/30 border border-cyan-600/50 rounded-lg p-4">
                    <h3 class="text-cyan-400 font-semibold mb-2">‚ÑπÔ∏è How This Explorer Displays Rarity</h3>
                    <p>This explorer displays NFTs by their <strong>Rarity Class (1-40)</strong> based on the official Object rarity system. Within each class, NFTs are sorted by the actual scarcity of their traits. We chose this approach to stay true to the original design while avoiding conflicts with marketplace rankings.</p>
                </div>

                <div>
                    <h3 class="text-lg font-semibold text-white mb-2">Part 1: NFT Generation Process</h3>
                    <p>The image combinations for the AllianceDAO NFTs were created using the open-source <strong>Hashlips Art Engine</strong>. Each of the 10,000 unique NFTs consists of 5 distinct image layers:</p>
                    <ul class="list-disc list-inside pl-4 mt-2 space-y-1">
                        <li><strong>Planet (Background):</strong> 20 options (10 planets √ó 2 variations: North and South)</li>
                        <li><strong>Object:</strong> 40 options with weighted rarity probabilities</li>
                        <li><strong>Inhabitant:</strong> 20 options (10 races √ó 2 genders: Male and Female)</li>
                        <li><strong>Light:</strong> Unique lighting overlay for each planet</li>
                        <li><strong>Weather:</strong> Various weather effects, some planet-specific</li>
                    </ul>
                    <p class="mt-2">Each NFT has a unique DNA sequence. If a duplicate combination is generated, it is discarded and regenerated.</p>
                </div>

                <div>
                    <h3 class="text-lg font-semibold text-white mb-2">Part 2: The Official Rarity System</h3>
                    <p class="mb-3">According to the official AllianceDAO documentation:</p>
                    
                    <div class="grid md:grid-cols-2 gap-4">
                        <div class="pl-4 border-l-2 border-gray-500">
                            <h4 class="font-semibold text-white">Planet & Inhabitant</h4>
                            <p class="mt-1 text-gray-400">Designed for <strong>equal distribution</strong>. Each of the 20 options was intended to have a 5% chance (~500 NFTs each).</p>
                        </div>
                        <div class="pl-4 border-l-2 border-cyan-500">
                            <h4 class="font-semibold text-cyan-400">Object (The Rarity Factor)</h4>
                            <p class="mt-1 text-gray-400">40 objects with <strong>weighted probabilities</strong>. Each object has a "Rarity" score from 1 (most common) to 40 (rarest - Phoenix Rising).</p>
                        </div>
                    </div>
                    
                    <div class="mt-4 pl-4 border-l-2 border-gray-500">
                        <h4 class="font-semibold text-white">Weather & Light</h4>
                        <p class="mt-1 text-gray-400">The official documentation states: <em>"The weather and light layers do not factor into the rarity scores, as they were generally unique to each planet."</em> However, due to random generation, some Weather/Light combinations ended up extremely rare (e.g., "Lightning strike" appears on only 6 NFTs).</p>
                    </div>
                </div>

                <div>
                    <h3 class="text-lg font-semibold text-white mb-2">Part 3: How This Explorer Sorts NFTs</h3>
                    <p class="mb-3">We use the <strong>Rarity Class</strong> system with trait-based tie-breakers:</p>
                    
                    <div class="bg-gray-800 rounded-lg p-4">
                        <ol class="list-decimal list-inside space-y-2">
                            <li><strong class="text-cyan-400">Rarity Class (Primary):</strong> The official Object rarity score (1-40). NFTs with Rarity 40 appear first, then 39, etc.</li>
                            <li><strong class="text-gray-300">Object Count (Tie-breaker 1):</strong> Within the same Rarity Class, NFTs with fewer copies of their specific Object appear first.</li>
                            <li><strong class="text-gray-300">Weather Count (Tie-breaker 2):</strong> If still tied, NFTs with rarer Weather effects appear first.</li>
                            <li><strong class="text-gray-300">Light Count (Tie-breaker 3):</strong> If still tied, NFTs with rarer Light effects appear first.</li>
                            <li><strong class="text-gray-400">NFT ID (Final):</strong> If all else is equal, lower NFT IDs appear first.</li>
                        </ol>
                    </div>
                    
                    <p class="mt-3 text-gray-400">This approach respects the original design while acknowledging that some trait combinations are genuinely scarcer than others.</p>
                </div>

                <div>
                    <h3 class="text-lg font-semibold text-white mb-2">Part 4: A Note on Marketplace Rankings</h3>
                    <p class="mb-3">Different platforms may calculate rankings differently:</p>
                    
                    <div class="bg-yellow-900/20 border border-yellow-700/50 rounded-lg p-4">
                        <p class="text-yellow-200/80 text-xs">The BackBone Labs (BBL) marketplace displays its own ranking system that may include Weather and Light traits differently than the original design intended. We have chosen to display <strong>Rarity Class</strong> rather than a specific rank number to avoid confusion. If you see different rankings on BBL, this is expected and does not mean either system is "wrong" - they simply use different methodologies.</p>
                    </div>
                </div>

                <div>
                    <h3 class="text-lg font-semibold text-white mb-2">Part 5: Object Rarity Reference</h3>
                    <p class="mb-2">The 40 objects ordered by designed rarity (rarest first):</p>
                    <div class="bg-gray-800 rounded-lg p-3 max-h-48 overflow-y-auto text-xs">
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-1">
                            <span class="text-yellow-400">40. Phoenix Rising (0.12%)</span>
                            <span class="text-yellow-400">39. Sindarin Fire Saber (0.24%)</span>
                            <span class="text-yellow-400">38. Sword of Zando (0.37%)</span>
                            <span class="text-yellow-400">37. Zandoan Vine Bow (0.49%)</span>
                            <span class="text-orange-400">36. Lusan Xtreme Soaker (0.61%)</span>
                            <span class="text-orange-400">35. Sindarin Flame Thrower (0.73%)</span>
                            <span class="text-orange-400">34. Ozaran Blaster (0.85%)</span>
                            <span class="text-orange-400">33. Cristallian Ray Gun (0.98%)</span>
                            <span class="text-gray-300">32. Quartz Ray Gun (1.10%)</span>
                            <span class="text-gray-300">31. Cruthan Blaster (1.22%)</span>
                            <span class="text-gray-300">30. SST Fishing Pole (1.34%)</span>
                            <span class="text-gray-300">29. Cristallian Sword (1.46%)</span>
                            <span class="text-gray-400">28. Gredican Sword (1.59%)</span>
                            <span class="text-gray-400">27. Pampan Grass Sword (1.71%)</span>
                            <span class="text-gray-400">26. Lusan Water Saber (1.83%)</span>
                            <span class="text-gray-400">25. Kitan Ice Sword (1.95%)</span>
                            <span class="text-gray-400">24. Ozaran Death Saber (2.07%)</span>
                            <span class="text-gray-400">23. Minasan Ore Sword (2.20%)</span>
                            <span class="text-gray-400">22. Royal Ozaran Bow (2.32%)</span>
                            <span class="text-gray-400">21. Cristallian Bow (2.44%)</span>
                            <span class="text-gray-500">20. Sindarin Fire Bow (2.56%)</span>
                            <span class="text-gray-500">19. Kitan Ice Bow (2.68%)</span>
                            <span class="text-gray-500">18. Minasan Bow (2.80%)</span>
                            <span class="text-gray-500">17. Gredican Power Staff (2.93%)</span>
                            <span class="text-gray-500">16. Staff of Zando (3.05%)</span>
                            <span class="text-gray-500">15. Sindarin Fire Staff (3.17%)</span>
                            <span class="text-gray-500">14. Pampan Grass Staff (3.29%)</span>
                            <span class="text-gray-500">13. Ozaran Sand Staff (3.41%)</span>
                            <span class="text-gray-500">12. Cristallian Staff (3.54%)</span>
                            <span class="text-gray-500">11. Kitan Ice Staff (3.66%)</span>
                            <span class="text-gray-500">10. Lusan Water Staff (3.78%)</span>
                            <span class="text-gray-500">9. Minasan Ore Staff (3.90%)</span>
                            <span class="text-gray-500">8. Ice Cleaver (4.02%)</span>
                            <span class="text-gray-500">7. Ancient Lusan Trident (4.15%)</span>
                            <span class="text-gray-500">6. Ozaran Bone Axe (4.27%)</span>
                            <span class="text-gray-500">5. Cruthan Death Mace (4.39%)</span>
                            <span class="text-gray-500">4. The Eternal Torch (4.51%)</span>
                            <span class="text-gray-500">3. Golden Hammer (4.63%)</span>
                            <span class="text-gray-500">2. Battle Shovel (4.76%)</span>
                            <span class="text-gray-500">1. Battle Axe (4.88%)</span>
                        </div>
                    </div>
                </div>

                <div class="bg-gray-800 rounded-lg p-4">
                    <h3 class="text-lg font-semibold text-white mb-2">üéñÔ∏è Trait Medals in NFT Details</h3>
                    <p class="mb-2">When viewing an NFT's details, you'll see medals indicating how rare each trait is within its category:</p>
                    <div class="flex gap-6 text-sm">
                        <span>ü•á = Rarest in category</span>
                        <span>ü•à = 2nd rarest</span>
                        <span>ü•â = 3rd rarest</span>
                    </div>
                </div>

                <p class="pt-4 text-xs text-gray-500 italic border-t border-gray-700">Data sources: NFT metadata from official collection, status data from deving.zone. This explorer is a community tool and is not officially affiliated with AllianceDAO or BackBone Labs.</p>
            </div>
        </div>
    </div>
    
    <!-- Sorting Explained Modal -->
    <div id="sorting-modal" class="modal-backdrop hidden">
        <div class="modal-content text-gray-300" style="max-width: 900px;">
            <svg id="sorting-modal-close" class="modal-close-btn w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            <h2 class="text-2xl font-bold text-white mb-4">How NFTs Are Sorted</h2>
            <div class="space-y-6 text-sm leading-relaxed">
                
                <div class="bg-green-900/30 border border-green-600/50 rounded-lg p-4">
                    <h3 class="text-green-400 font-semibold mb-2">Understanding the Display: 40/1</h3>
                    <p>When you see <strong class="text-white">40/1</strong> on an NFT card:</p>
                    <ul class="mt-2 space-y-1">
                        <li><strong class="text-cyan-400">40</strong> = The Rarity Class (Object rarity from metadata, 1-40 scale)</li>
                        <li><strong class="text-cyan-400">/1</strong> = Position within that class based on other trait scarcity</li>
                    </ul>
                    <p class="mt-2 text-gray-400">So <strong>40/1</strong> is the rarest NFT in Rarity Class 40, while <strong>40/25</strong> would be the 25th rarest in that class.</p>
                </div>

                <div>
                    <h3 class="text-lg font-semibold text-white mb-2">Sorting Priority (Default: High to Low)</h3>
                    <p class="mb-3">NFTs are sorted by scarcity using the following priority:</p>
                    
                    <div class="space-y-3">
                        <div class="flex items-start gap-3 bg-gray-800 rounded-lg p-3">
                            <span class="bg-yellow-500 text-black font-bold rounded-full w-6 h-6 flex items-center justify-center flex-shrink-0">1</span>
                            <div>
                                <h4 class="font-semibold text-yellow-400">Rarity Class (Object)</h4>
                                <p class="text-gray-400 text-xs">The official rarity score (1-40) from metadata. Phoenix Rising = 40, Battle Axe = 1. This is the primary sort factor.</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start gap-3 bg-gray-800 rounded-lg p-3">
                            <span class="bg-cyan-500 text-black font-bold rounded-full w-6 h-6 flex items-center justify-center flex-shrink-0">2</span>
                            <div>
                                <h4 class="font-semibold text-cyan-400">Planet + Zone (Background)</h4>
                                <p class="text-gray-400 text-xs">The background makes up ~80% of the visual. Each of the 20 combinations (10 planets √ó North/South) has a different actual count from the mint. Rarer backgrounds rank higher.</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start gap-3 bg-gray-800 rounded-lg p-3">
                            <span class="bg-purple-500 text-black font-bold rounded-full w-6 h-6 flex items-center justify-center flex-shrink-0">3</span>
                            <div>
                                <h4 class="font-semibold text-purple-400">Inhabitant + Gender</h4>
                                <p class="text-gray-400 text-xs">The character shown. Each of the 20 combinations (10 races √ó Male/Female) has different mint counts. Rarer inhabitants rank higher.</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start gap-3 bg-gray-800 rounded-lg p-3">
                            <span class="bg-blue-500 text-black font-bold rounded-full w-6 h-6 flex items-center justify-center flex-shrink-0">4</span>
                            <div>
                                <h4 class="font-semibold text-blue-400">Weather</h4>
                                <p class="text-gray-400 text-xs">Environmental weather effects. Some are very rare (e.g., "Lightning strike" with only 6 NFTs).</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start gap-3 bg-gray-800 rounded-lg p-3">
                            <span class="bg-gray-500 text-black font-bold rounded-full w-6 h-6 flex items-center justify-center flex-shrink-0">5</span>
                            <div>
                                <h4 class="font-semibold text-gray-400">Light</h4>
                                <p class="text-gray-400 text-xs">Lighting overlay effects, typically planet-specific.</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start gap-3 bg-gray-800 rounded-lg p-3">
                            <span class="bg-gray-600 text-white font-bold rounded-full w-6 h-6 flex items-center justify-center flex-shrink-0">6</span>
                            <div>
                                <h4 class="font-semibold text-gray-500">NFT ID</h4>
                                <p class="text-gray-400 text-xs">Final tie-breaker. Lower IDs appear first.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div>
                    <h3 class="text-lg font-semibold text-white mb-2">Planet + Zone Distribution</h3>
                    <p class="mb-2 text-gray-400">Actual counts from the mint (sorted by rarity):</p>
                    <div id="planet-distribution" class="bg-gray-800 rounded-lg p-3 max-h-48 overflow-y-auto text-xs">
                        <p class="text-gray-500 italic">Loading distribution data...</p>
                    </div>
                </div>

                <div>
                    <h3 class="text-lg font-semibold text-white mb-2">Inhabitant + Gender Distribution</h3>
                    <p class="mb-2 text-gray-400">Actual counts from the mint (sorted by rarity):</p>
                    <div id="inhabitant-distribution" class="bg-gray-800 rounded-lg p-3 max-h-48 overflow-y-auto text-xs">
                        <p class="text-gray-500 italic">Loading distribution data...</p>
                    </div>
                </div>

                <div class="bg-gray-800 rounded-lg p-4">
                    <h3 class="text-lg font-semibold text-white mb-2">üè† Matching Traits Filter</h3>
                    <p class="text-gray-400 mb-3">Find NFTs where traits belong together thematically:</p>
                    
                    <div class="grid md:grid-cols-2 gap-4 text-xs">
                        <div class="bg-gray-700/50 rounded p-3">
                            <h4 class="text-cyan-400 font-semibold mb-2">P+I (Planet + Inhabitant)</h4>
                            <p class="text-gray-400">Inhabitant is on their home planet:</p>
                            <ul class="mt-1 text-gray-500 space-y-1">
                                <li>‚Ä¢ Cristallian on Cristall</li>
                                <li>‚Ä¢ Sindarin on Sindari</li>
                                <li>‚Ä¢ Ozaran on Ozara</li>
                                <li>‚Ä¢ etc...</li>
                            </ul>
                        </div>
                        <div class="bg-gray-700/50 rounded p-3">
                            <h4 class="text-yellow-400 font-semibold mb-2">P+I+O (Full Match)</h4>
                            <p class="text-gray-400">All three traits belong together:</p>
                            <ul class="mt-1 text-gray-500 space-y-1">
                                <li>‚Ä¢ Cristallian on Cristall with Cristallian Ray Gun</li>
                                <li>‚Ä¢ Sindarin on Sindari with Sindarin Fire Saber</li>
                                <li>‚Ä¢ Ozaran on Ozara with Ozaran Blaster</li>
                                <li>‚Ä¢ etc...</li>
                            </ul>
                        </div>
                    </div>
                    <p class="mt-3 text-gray-500 text-xs">Use the slider to switch between match levels. This filter affects all other filters and counts.</p>
                </div>

                <p class="pt-4 text-xs text-gray-500 italic border-t border-gray-700">This sorting method prioritizes the visual impact of traits while respecting the official rarity system. Distribution counts are calculated from actual mint data.</p>
            </div>
        </div>
    </div>
    
     <div id="badge-modal" class="modal-backdrop hidden">
        <div class="modal-content text-gray-300" style="width: 600px;">
            <svg id="badge-modal-close" class="modal-close-btn w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Badge & Status Key</h2>
            <div class="space-y-4">
                <div class="flex items-center gap-4 p-3 bg-gray-800 rounded-lg">
                    <div class="w-24 flex-shrink-0 flex items-center justify-center">
                         <div class="h-10 w-full flex items-center justify-center" style="background-color: rgba(220, 38, 38, 0.85); color: white; font-size: 1rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.1em;">
                            BROKEN
                        </div>
                    </div>
                    <p class="text-sm">Indicates the NFT's metadata is 'broken,' making it eligible for rewards.</p>
                </div>
                <div class="flex items-center gap-4 p-3 bg-gray-800 rounded-lg">
                    <div class="w-24 flex-shrink-0 flex items-center justify-center">
                        <img src="https://raw.githubusercontent.com/defipatriot/aDAO-Image-Files/main/DAODAO.png" alt="DAODAO Logo" class="w-12 h-12 object-contain">
                    </div>
                    <p class="text-sm">Staked on the DAODAO platform.</p>
                </div>
                <div class="flex items-center gap-4 p-3 bg-gray-800 rounded-lg">
                    <div class="w-24 flex-shrink-0 flex items-center justify-center">
                        <img src="https://raw.githubusercontent.com/defipatriot/aDAO-Image-Files/main/Enterprise.jpg" alt="Enterprise Logo" class="w-12 h-12 object-contain rounded-full">
                    </div>
                    <p class="text-sm">Staked on the legacy Enterprise protocol.</p>
                </div>
                 <div class="flex items-center gap-4 p-3 bg-gray-800 rounded-lg">
                    <div class="w-24 flex-shrink-0 flex items-center justify-center">
                        <img src="https://raw.githubusercontent.com/defipatriot/aDAO-Image-Files/main/BBL%20No%20Background.png" alt="BBL Logo" class="w-12 h-12 object-contain">
                    </div>
                    <p class="text-sm">Listed for sale on the BackBone Labs marketplace.</p>
                </div>
                 <div class="flex items-center gap-4 p-3 bg-gray-800 rounded-lg">
                    <div class="w-24 flex-shrink-0 flex items-center justify-center">
                        <img src="https://raw.githubusercontent.com/defipatriot/aDAO-Image-Files/main/Boost%20Logo.png" alt="Boost Logo" class="w-12 h-12 object-contain">
                    </div>
                    <p class="text-sm">Listed for sale on the Boost marketplace.</p>
                </div>
                 <div class="flex items-center gap-4 p-3 bg-gray-800 rounded-lg">
                    <div class="w-24 flex-shrink-0 flex items-center justify-center">
                        <img src="https://raw.githubusercontent.com/defipatriot/aDAO-Image-Files/main/Alliance%20DAO%20Logo.png" alt="Alliance DAO Logo" class="w-12 h-12 object-contain">
                    </div>
                    <p class="text-sm">Owned by the Alliance DAO wallet (currently un-minted).</p>
                </div>
            </div>
        </div>
    </div>

    <div id="wallet-explorer-modal" class="modal-backdrop hidden">
        <div class="modal-content" style="width: 900px;">
            <svg id="wallet-modal-close" class="modal-close-btn w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            <h2 id="wallet-modal-title" class="text-xl font-bold text-white mb-4 text-center font-mono"></h2>
            <div id="wallet-modal-stats" class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6 p-4 bg-gray-900/50 rounded-lg border border-gray-700"></div>
            <div id="wallet-modal-gallery" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4 max-h-[50vh] overflow-y-auto pr-2"></div>
        </div>
    </div>
    
    <div id="system-leaderboard-modal" class="modal-backdrop hidden">
        <div class="modal-content" style="width: 900px;">
            <svg id="system-modal-close" class="modal-close-btn w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            <h2 id="system-modal-title" class="text-2xl font-bold text-white mb-4 text-center"></h2>
            <div id="system-modal-disclaimer" class="hidden p-3 mb-4 text-sm text-yellow-200 bg-yellow-900/50 border border-yellow-700 rounded-lg"></div>
            <div id="system-modal-table" class="mb-4"></div>
            <div id="system-modal-pagination" class="flex justify-center items-center space-x-4"></div>
        </div>
    </div>


    <canvas id="share-canvas" class="hidden"></canvas>

    <script src="nft-explorer-app.js" defer></script>

</body>
</html>
