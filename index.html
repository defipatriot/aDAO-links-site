<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alliance DAO Dashboard</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        /* --- Base Styles --- */
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: #0D0D0D;
            color: #EAEAEA;
        }

        /* --- Card Styles --- */
        .stat-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }
        .stat-card:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(45, 212, 191, 0.5);
        }
        .info-card {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 1.5rem;
        }
        .info-card .icon {
            font-size: 1.75rem;
            margin-bottom: 0.75rem;
            color: #2dd4bf; /* teal-400 */
        }
        .info-card h3 {
            font-size: 1.125rem;
            font-weight: 700;
            color: #fff;
            margin-bottom: 0.5rem;
        }
        .info-card p, .info-card .link-text {
            font-size: 0.875rem;
            color: #9ca3af; /* gray-400 */
            line-height: 1.5;
            flex-grow: 1; /* Allows text to take up space */
        }
         .info-card .link-group {
            margin-top: 1rem;
        }
        .info-card a:hover .link-text, .info-card a:hover h3, .info-card .link-text a:hover {
            color: #2dd4bf;
        }

        /* --- Slider Styles --- */
        .slider-bar {
            display: flex;
            height: 0.75rem;
            border-radius: 9999px;
            overflow: hidden;
            position: relative;
        }
        .slider-fill-blue {
            background: linear-gradient(90deg, #00F2FE, #2889FC);
        }
        .slider-fill-gray {
            background-color: #374151; /* gray-700 */
        }

        /* --- Marketplace Card Styles --- */
        .activity-card {
             background: #1A1A1A;
             border: 1px solid #2e2e2e;
             transition: all 0.3s ease;
             position: relative;
             overflow: hidden;
             cursor: pointer;
        }
        .activity-card:hover {
            transform: translateY(-5px);
            border-color: #2dd4bf;
        }
        .marketplace-link:hover .marketplace-text {
            color: #2dd4bf;
        }
        .status-bar {
            background-color: #000000;
        }
        .status-text {
            font-weight: 800;
            text-transform: uppercase;
        }
        .status-daodao { color: #38bdf8; }
        .status-enterprise { color: #4ade80; }
        .status-liquid { color: #facc15; }
        .status-bbl { color: #9ca3af; }
        .status-boost { color: #60a5fa; }
        .status-unminted {
            background: linear-gradient(90deg, #a855f7, #ec4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .broken-overlay {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            pointer-events: none;
        }
        .broken-overlay.hidden {
            display: none;
        }
        .broken-banner {
            position: absolute;
            background-color: rgba(239, 68, 68, 0.8);
            color: white;
            font-size: 1.25rem;
            font-weight: 800;
            padding: 0.5rem 4rem;
            transform: rotate(-30deg);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            border: 2px solid rgba(255, 255, 255, 0.8);
        }
        .toggle-broken-btn {
            cursor: pointer;
            color: #9ca3af;
            transition: color 0.2s;
            pointer-events: all; /* Make sure eye icon is clickable */
        }
        .toggle-broken-btn:hover {
            color: white;
        }
        
        /* --- Pulse Animation for Live Proposals --- */
        .pulse-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: #4ade80; /* green-400 */
            animation: pulse 2s infinite;
            box-shadow: 0 0 0 0 rgba(74, 222, 128, 1);
        }
        @keyframes pulse {
            0% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(74, 222, 128, 0.7); }
            70% { transform: scale(1); box-shadow: 0 0 0 10px rgba(74, 222, 128, 0); }
            100% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(74, 222, 128, 0); }
        }

        /* --- Red Static Dot for No Proposals --- */
        .static-dot-red {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: #ef4444; /* red-500 */
        }
        
        /* --- NFT Detail Modal --- */
        #nftDetailModal {
            transition: opacity 0.3s ease;
        }
        #nftDetailModal.hidden {
            pointer-events: none;
        }
        #nftDetailModal .modal-content {
            transition: transform 0.3s ease, opacity 0.3s ease;
        }
        #nftDetailModal.hidden .modal-content {
            transform: scale(0.95);
            opacity: 0;
        }
    </style>
</head>
<body class="antialiased">

    <!-- Header Section -->
    <header class="py-4">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex justify-between items-center">
            <!-- Left: Logo (Not a link on the dashboard page) -->
            <div class="flex-shrink-0 w-32">
                <img src="https://raw.githubusercontent.com/defipatriot/aDAO-Image-Files/main/Alliance%20DAO%20Logo.png" alt="Alliance DAO Logo" class="h-16 w-auto">
            </div>
            <!-- Center: Navigation Tiles -->
            <nav class="flex-1 flex justify-center items-center space-x-6">
                <a href="nft-explorer.html" class="bg-gray-800/50 hover:bg-gray-700/80 border border-gray-700 text-white font-bold py-3 px-8 rounded-lg shadow-lg transition-all transform hover:scale-105">
                    NFT Explorer
                </a>
                <a href="planet-map.html" class="bg-gray-800/50 hover:bg-gray-700/80 border border-gray-700 text-white font-bold py-3 px-8 rounded-lg shadow-lg transition-all transform hover:scale-105">
                    Galaxy Map
                </a>
            </nav>
            <!-- Right: Terra Logo -->
            <div class="w-32 flex-shrink-0 flex justify-end">
                <img src="https://raw.githubusercontent.com/defipatriot/aDAO-Image-Planets-Empty/main/Terra.PNG" alt="Terra Logo" class="h-16 w-auto">
            </div>
        </div>
    </header>

    <!-- CoinGecko Price Marquee -->
    <div class="py-2 border-b border-gray-800">
        <script src="https://widgets.coingecko.com/gecko-coin-price-marquee-widget.js"></script>
        <gecko-coin-price-marquee-widget locale="en" dark-mode="true" outlined="true" coin-ids="terra-luna-2,eris-amplified-luna,solid-2,capapult,lion-dao,astroport-fi,cosmos,bitcoin,ethereum" initial-currency="usd"></gecko-coin-price-marquee-widget>
    </div>


    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        
        <!-- Disclaimer Banner -->
        <div id="disclaimer-banner" class="bg-yellow-500/10 border border-yellow-400/30 text-yellow-300 px-4 py-3 rounded-lg relative mb-8 text-center" role="alert">
            <strong class="font-bold">Please Note:</strong>
            <span class="block sm:inline">This is a static demonstration site. The data shown is from a snapshot taken on <span id="snapshot-date">...</span>, and is not live.</span>
            <span id="close-banner" class="absolute top-0 bottom-0 right-0 px-4 py-3 cursor-pointer">
                <svg class="fill-current h-6 w-6 text-yellow-400" role="button" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><title>Close</title><path d="M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"/></svg>
            </span>
        </div>

        <!-- Top Info Cards Section -->
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <a href="ally.html" class="stat-card info-card rounded-xl group">
                <i class="fas fa-layer-group icon"></i>
                <h3 class="group-hover:text-teal-400">ALLY Rewards</h3>
                <p>A pioneering collection backed by LUNA staking rewards. Your share of the pool grows as others claim theirs.</p>
                <span class="link-text link-group">Learn More &rarr;</span>
            </a>
            <div class="flex flex-col gap-4">
                 <a href="tutorials.html" class="stat-card info-card rounded-xl group flex-1">
                     <i class="fas fa-video icon !mb-2"></i>
                     <h3 class="group-hover:text-teal-400 !mb-0">Tutorials & Guides</h3>
                </a>
                <a href="news.html" class="stat-card info-card rounded-xl group flex-1">
                     <i class="fas fa-newspaper icon !mb-2"></i>
                     <h3 class="group-hover:text-teal-400 !mb-0">Ecosystem News</h3>
                </a>
            </div>
             <div class="flex flex-col gap-4">
                <a href="rarity-explained.html" class="stat-card info-card rounded-xl group flex-1">
                     <i class="fas fa-gem icon !mb-2"></i>
                     <h3 class="group-hover:text-teal-400 !mb-0">Rarity Info</h3>
                </a>
                <a href="release-history.html" class="stat-card info-card rounded-xl group flex-1">
                     <i class="fas fa-stream icon !mb-2"></i>
                     <h3 class="group-hover:text-teal-400 !mb-0">NFT Release History</h3>
                </a>
            </div>
            <div class="flex flex-col gap-4">
                <a href="links.html" class="stat-card info-card rounded-xl group flex-1">
                     <i class="fas fa-link icon !mb-2"></i>
                     <h3 class="group-hover:text-teal-400 !mb-0">Official Links</h3>
                </a>
                <a href="alliances.html" class="stat-card info-card rounded-xl group flex-1">
                     <i class="fas fa-handshake icon !mb-2"></i>
                     <h3 class="group-hover:text-teal-400 !mb-0">Our Alliances</h3>
                </a>
            </div>
        </div>
        
        <!-- Status Sliders Section -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
            <!-- Mint Status -->
            <div class="stat-card p-4 rounded-xl">
                <div class="flex justify-between items-center text-sm font-medium text-gray-300">
                    <span>Un-minted</span>
                    <h3 class="text-base font-semibold text-gray-400">Mint Status</h3>
                    <span>Minted</span>
                </div>
                <div id="mint-slider" class="slider-bar mt-2">
                    <!-- Slider will be generated by JS -->
                </div>
                <div class="flex justify-between text-sm font-bold text-white mt-2">
                    <span id="unminted-count">...</span>
                    <span id="minted-percent" class="text-center text-cyan-400">...</span>
                    <span id="minted-count">...</span>
                </div>
            </div>
            <!-- Broken Status -->
            <div class="stat-card p-4 rounded-xl">
                <div class="flex justify-between items-center text-sm font-medium text-gray-300">
                    <span>Un-Broken</span>
                     <h3 class="text-base font-semibold text-gray-400">Broken Status</h3>
                    <span>Broken</span>
                </div>
                <div id="broken-slider" class="slider-bar mt-2">
                    <!-- Slider will be generated by JS -->
                </div>
                <div class="flex justify-between text-sm font-bold text-white mt-2">
                    <span id="unbroken-count">...</span>
                    <div class="text-center">
                        <p id="broken-percent" class="text-cyan-400 text-xs">...</p>
                    </div>
                    <span id="broken-count">...</span>
                </div>
            </div>
        </div>

        <!-- Historical Charts Link -->
        <a href="graphs.html" class="stat-card rounded-xl group flex items-center justify-center text-center p-6 mb-8">
             <i class="fas fa-chart-line icon mr-4"></i>
             <div>
                <h3 class="text-xl font-bold group-hover:text-teal-400">View Historical Data & Charts</h3>
                <p class="text-gray-400">Explore detailed charts on backing, sales, and forward-looking projections.</p>
             </div>
        </a>

        <!-- Key Metrics Section -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-6 mb-8">
            <div class="stat-card p-6 rounded-xl text-center flex flex-col justify-between h-full bg-green-500/10 border-green-500/30">
                <div>
                    <h3 class="text-md font-medium text-green-300">DAODAO Staked</h3>
                    <p id="daodao-staked" class="text-3xl font-bold text-white mt-2">...</p>
                </div>
                <p id="daodao-change" class="text-sm font-semibold mt-1 text-green-400">...</p>
            </div>
            <a href="https://daodao.zone/dao/terra1sffd4efk2jpdt894r04qwmtjqrrjfc52tmj6vkzjxqhd8qqu2drs3m5vzm/members" target="_blank" rel="noopener noreferrer" class="stat-card p-6 rounded-xl text-center group flex flex-col justify-between h-full bg-green-500/10 border-green-500/30">
                <div>
                    <h3 class="text-md font-medium text-green-300">DAO Members</h3>
                    <p id="dao-members" class="text-3xl font-bold text-white mt-2">...</p>
                </div>
                 <p id="dao-members-change" class="text-sm font-semibold mt-1 text-green-400">...</p>
            </a>
            <div class="stat-card p-6 rounded-xl text-center flex flex-col justify-between h-full bg-green-500/10 border-green-500/30">
                <div>
                    <h3 class="text-md font-medium text-green-300">Enterprise Staked</h3>
                    <p id="enterprise-staked" class="text-3xl font-bold text-white mt-2">...</p>
                </div>
                <p id="enterprise-change" class="text-sm font-semibold mt-1 text-green-400">...</p>
            </div>
            <div class="stat-card p-6 rounded-xl text-center flex flex-col justify-between h-full">
                <div>
                    <h3 id="live-proposals-title" class="text-md font-medium text-gray-400 flex justify-center items-center gap-2">Live Proposals</h3>
                    <p id="live-proposals-count" class="text-3xl font-bold text-white mt-2">...</p>
                </div>
                <a href="https://daodao.zone/dao/terra1sffd4efk2jpdt894r04qwmtjqrrjfc52tmj6vkzjxqhd8qqu2drs3m5vzm/proposals" target="_blank" rel="noopener noreferrer" class="text-sm font-semibold mt-1 text-cyan-400 hover:underline">Vote on DAODAO</a>
            </div>
            <div class="stat-card p-6 rounded-xl text-center flex flex-col justify-between h-full bg-green-500/10 border-green-500/30">
                <div>
                    <h3 class="text-md font-medium text-green-300">Backing in LUNA</h3>
                    <p id="backing-per-nft" class="text-3xl font-bold text-white mt-2">...</p>
                </div>
                 <p id="backing-per-nft-change" class="text-xs font-semibold mt-1 text-green-400">...</p>
            </div>
            <div class="stat-card p-6 rounded-xl text-center flex flex-col justify-between h-full">
                <div>
                    <h3 id="backing-usd-title" class="text-md font-medium text-gray-400 group-hover:text-teal-400">Backing in USD (Live)</h3>
                    <p id="backing-per-nft-usd" class="text-3xl font-bold text-white mt-2">...</p>
                </div>
                <p id="live-luna-price" class="text-xs font-semibold mt-1 text-gray-500">...</p>
            </div>
            <div class="stat-card p-6 rounded-xl text-center flex flex-col justify-between h-full">
                <div>
                    <h3 class="text-md font-medium text-gray-400">DAO Treasury</h3>
                    <p id="dao-treasury" class="text-3xl font-bold text-white mt-2">...</p>
                </div>
                <p class="text-xs font-semibold mt-1 text-gray-500">Un-minted Backing (@ Avg Price)</p>
            </div>
            <div class="stat-card p-6 rounded-xl text-center flex flex-col justify-between h-full">
                 <div>
                    <h3 class="text-md font-medium text-gray-400 group-hover:text-teal-400">DAO TLA VP</h3>
                    <p id="dao-tla-vp" class="text-3xl font-bold text-white mt-2">...</p>
                </div>
                <p class="text-xs font-semibold mt-1 text-gray-500 invisible">placeholder</p>
            </div>
        </div>

        <!-- Marketplace Activity Section -->
        <div class="mt-12">
            <div class="stat-card rounded-xl p-6 mb-8">
                 <h2 class="text-3xl font-bold text-white text-center">Marketplace Activity</h2>
                 <p id="marketplace-snapshot" class="text-lg text-cyan-400 font-semibold text-center">...</p>
                 <div class="mt-4 grid grid-cols-2 md:grid-cols-4 gap-6 text-center border-t border-gray-700 pt-4">
                    <div>
                        <p class="text-md font-medium text-gray-400">Last 30 Days Sales (BBL)</p>
                        <p id="bbl-sales-30d" class="text-2xl font-bold text-white">...</p>
                    </div>
                     <div>
                        <p class="text-md font-medium text-gray-400">All Time Sales Volume (BBL)</p>
                        <p id="bbl-volume" class="text-2xl font-bold text-white">...</p>
                    </div>
                    <div>
                        <p class="text-md font-medium text-gray-400">Last 30 Days Sales (Boost)</p>
                        <p id="boost-sales-30d" class="text-2xl font-bold text-white">...</p>
                    </div>
                     <div>
                        <p class="text-md font-medium text-gray-400">All Time Sales (Boost)</p>
                        <p id="boost-volume" class="text-2xl font-bold text-white">...</p>
                    </div>
                </div>
            </div>

            <!-- BBL Marketplace -->
            <div class="mb-12">
                 <a href="https://app.backbonelabs.io/nfts/marketplace/collections/terra1phr9fngjv7a8an4dhmhd0u0f98wazxfnzccqtyheq4zqrrp4fpuqw3apw9" target="_blank" rel="noopener noreferrer" class="marketplace-link flex items-center justify-center mb-6 group">
                    <img src="https://raw.githubusercontent.com/defipatriot/aDAO-Image-Files/main/BBL%20Logo.png" alt="BackBone Labs Logo" class="h-10 w-auto">
                </a>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div>
                        <h4 class="text-lg font-semibold text-gray-300 mb-4 text-center">Recently Sold</h4>
                        <div id="bbl-sold-container" class="grid grid-cols-2 gap-4">
                            <!-- BBL Sold Cards Generated by JS -->
                        </div>
                    </div>
                    <div>
                        <h4 class="text-lg font-semibold text-gray-300 mb-4 text-center">Recently Listed</h4>
                        <div id="bbl-listed-container" class="grid grid-cols-2 gap-4">
                            <!-- BBL Listed Cards Generated by JS -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Boost Marketplace -->
            <div>
                 <a href="https://www.boostdao.io/ignite/permissionless-terra" target="_blank" rel="noopener noreferrer" class="marketplace-link flex items-center justify-center mb-6 group">
                    <img src="https://raw.githubusercontent.com/defipatriot/aDAO-Image-Files/main/Boost%20Logo.png" alt="Boost Logo" class="h-10 w-auto mr-4">
                    <h3 class="text-2xl font-bold text-white group-hover:text-cyan-400 transition-colors marketplace-text">Boost Ignite</h3>
                 </a>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div>
                        <h4 class="text-lg font-semibold text-gray-300 mb-4 text-center">Recently Sold</h4>
                        <div id="boost-sold-container" class="grid grid-cols-2 gap-4">
                            <!-- Boost Sold Cards Generated by JS -->
                        </div>
                    </div>
                    <div>
                        <h4 class="text-lg font-semibold text-gray-300 mb-4 text-center">Recently Listed</h4>
                        <div id="boost-listed-container" class="grid grid-cols-2 gap-4">
                            <!-- Boost Listed Cards Generated by JS -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <!-- NFT Detail Modal -->
    <div id="nftDetailModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-50 hidden opacity-0">
        <div class="modal-content bg-[#1a1a1a] border border-gray-700 rounded-xl shadow-xl w-full max-w-4xl relative text-white opacity-0 scale-95">
            <button id="closeNftDetailModal" class="absolute top-4 right-4 text-gray-400 hover:text-white text-3xl">&times;</button>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 p-8">
                <div>
                    <img id="modalNftImage" src="" alt="NFT Image" class="w-full h-auto rounded-lg">
                </div>
                <div>
                    <div class="flex items-center gap-4 mb-2">
                        <h3 id="modalNftTitle" class="text-3xl font-bold text-cyan-400"></h3>
                        <span id="modalNftRank" class="bg-cyan-500 text-white text-sm font-bold px-3 py-1 rounded-full"></span>
                    </div>
                    <p id="modalNftPrice" class="text-xl text-gray-300 mb-6"></p>
                    <div class="space-y-3 text-left">
                         <h4 class="text-xl font-semibold border-b border-gray-600 pb-2 mb-2">Traits</h4>
                         <div id="modalNftTraits" class="space-y-2">
                            <!-- Traits will be injected here by JS -->
                         </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <footer class="border-t border-gray-800 mt-12 py-8">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-gray-500 text-sm">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                <div>
                    <h4 class="font-bold text-gray-300 mb-2">Disclaimer</h4>
                    <p>This website is for informational purposes only and does not constitute financial advice. All data is provided "as is" without warranty. Please do your own research.</p>
                </div>
                <div>
                    <h4 class="font-bold text-gray-300 mb-2">Project Origin</h4>
                    <p>This site is built and maintained by a council member, not at the direction of the council, but as a passionate community member looking to improve the optics of the collection.</p>
                </div>
                <div>
                    <h4 class="font-bold text-gray-300 mb-2">Data Source</h4>
                    <p>All data on this site is from a manual snapshot and is not live. The plan is to automate this process in the future.</p>
                    <p class="mt-2">Last Manual Update: <span id="last-updated">...</span></p>
                </div>
                <div>
                    <h4 class="font-bold text-gray-300 mb-2">Transparency</h4>
                    <p>The plan is for the script used to retrieve on-chain data to be open-source. You will be able to view the public repository to see how information is retrieved.</p>
                    <a href="https://github.com/defipatriot" target="_blank" rel="noopener noreferrer" class="text-cyan-400 hover:underline mt-2 inline-block">View on GitHub</a>
                </div>
            </div>
        </div>
    </footer>
    
    <!-- New Quick Links Footer -->
    <footer class="py-6">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-gray-400">
            <div class="flex justify-center items-center space-x-6 mb-4">
                <a href="https://t.me/The_AllianceDAO" target="_blank" rel="noopener noreferrer" class="hover:text-white transition-colors">
                    <i class="fab fa-telegram-plane text-3xl"></i>
                </a>
                <a href="https://x.com/The_AllianceDAO" target="_blank" rel="noopener noreferrer" class="hover:text-white transition-colors">
                    <i class="fab fa-twitter text-3xl"></i>
                </a>
            </div>
            <div class="flex justify-center items-center space-x-6 text-sm">
                <a href="Tutorials.html" class="hover:text-white hover:underline transition-colors">Tutorials</a>
                <a href="Links.html" class="hover:text-white hover:underline transition-colors">Official Links</a>
                <a href="https://chainsco.pe/terra2/address/terra1phr9fngjv7a8an4dhmhd0u0f98wazxfnzccqtyheq4zqrrp4fpuqw3apw9" target="_blank" rel="noopener noreferrer" class="hover:text-white hover:underline transition-colors">NFT Contract</a>
                <a href="https://github.com/SCV-Security/PublicReports/blob/b819ec669f81e603caca261931e2a4aaca1cddf7/Alliance/Alliance%20DAO%20-%20NFT%20Collection%20Contract%20-%20Audit%20Report%20v1.0.pdf" target="_blank" rel="noopener noreferrer" class="hover:text-white hover:underline transition-colors">Contract Audit</a>
            </div>
        </div>
    </footer>


    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- CENTRAL DATA OBJECT ---
            // This object holds all the data for the dashboard.
            // To update the site, you only need to change the values in this object.
            const dashboardData = {
              "lastUpdated": "2025-09-01T08:00:00Z",
              "statusSliders": {
                "mint": { "unMinted": 5828, "minted": 4172, "percentMinted": "41.72%" },
                "broken": { "unBroken": 8924, "broken": 1076, "percentBroken": "10.76%" }
              },
              "keyMetrics": {
                "daodaoStaked": 1468, "daodaoChange30d": 61,
                "daoMembers": 158, "daoMembersChange30d": 2,
                "enterpriseStaked": 434, "enterpriseChange30d": -1,
                "liveProposals": 2, // UPDATED
                "backingInLuna": 109.97, "avgDailyGain": 0.21,
                "daoTlaVp": 508000, // CORRECTED to number
                "daoTreasuryUSD": "$149,579",
                "lunaHoldings": 955163 // CORRECTED to number
              },
              "marketplace": {
                "snapshotDate": "09/01/25",
                "bblSales30d": 18, "bblVolumeAllTime": "211,153 bLUNA",
                "boostSales30d": 6, "boostVolumeAllTime": "Unknown",
                // --- NFT METADATA ---
                // To update marketplace NFTs, change the id, price, broken status, and rank here.
                "bbl": {
                  "sold": [ { "id": "1473", "price": "249 bLUNA", "broken": false }, { "id": "3353", "price": "299 bLUNA", "broken": false } ],
                  "listed": [ { "id": "2633", "price": "56,000 bLUNA", "broken": false }, { "id": "615", "price": "199 bLUNA", "broken": true } ]
                },
                "boost": {
                  "sold": [ { "id": "4781", "price": "20 SOLID", "broken": false }, { "id": "615", "price": "10 SOLID", "broken": true } ],
                  "listed": [ { "id": "5258", "price": "60 SOLID", "broken": false }, { "id": "3826", "price": "70 SOLID", "broken": false } ]
                },
                "nftTraits": {
                    "1473": { "rank": 3456, "Background": "Lusa North", "Light": "Lusa", "Weather": "Lusa Rain", "Object": "Kitan Ice Staff", "Inhabitant": "Ozaran M" },
                    "3353": { "rank": 7890, "Background": "Crutha North", "Light": "Crutha", "Weather": "Crutha Smog", "Object": "Pampan Grass Sword", "Inhabitant": "Ozaran F" },
                    "2633": { "rank": 456, "Background": "Kita South", "Light": "Kita", "Weather": "Kita Snow", "Object": "Cristallian Sword", "Inhabitant": "Pampan M" },
                    "615": { "rank": 123, "Background": "Ozara South", "Light": "Ozara", "Weather": "Ozara Sandstorm", "Object": "Pampan Grass Staff", "Inhabitant": "Gredican M" },
                    "4781": { "rank": 1234, "Background": "Crutha South", "Light": "Crutha", "Weather": "Crutha Smog", "Object": "Ice Cleaver", "Inhabitant": "Lusan F" },
                    "5258": { "rank": 8123, "Background": "Pampas North", "Light": "Pampas", "Weather": "Pampas Rain", "Object": "Minasan Bow", "Inhabitant": "Zandoan M" },
                    "3826": { "rank": 2345, "Background": "Sindari South", "Light": "Sindari", "Weather": "Sindari Ash", "Object": "Lusan Water Staff", "Inhabitant": "Cruthan M" }
                }
              }
            };

            // --- UI UPDATE FUNCTION ---
            async function updateUI(data) {
                const formatNumber = (num) => {
                    if (typeof num === 'string' && num.startsWith('$')) {
                        const numberPart = parseFloat(num.replace(/[^0-9.-]+/g,""));
                        return '$' + numberPart.toLocaleString('en-US');
                    }
                    return Number(num).toLocaleString('en-US');
                };
                const formatChange = (value) => {
                    const num = Number(value);
                    return num > 0 ? `+${num}` : num;
                };

                // Timestamps
                const lastUpdatedDate = new Date(data.lastUpdated).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
                document.getElementById('snapshot-date').textContent = lastUpdatedDate;
                document.getElementById('last-updated').textContent = new Date(data.lastUpdated).toUTCString();

                // Sliders
                document.getElementById('mint-slider').innerHTML = `<div class="slider-fill-blue" style="width: ${100 - parseFloat(data.statusSliders.mint.percentMinted)}%;"></div><div class="slider-fill-gray" style="width: ${data.statusSliders.mint.percentMinted};"></div>`;
                document.getElementById('unminted-count').textContent = formatNumber(data.statusSliders.mint.unMinted);
                document.getElementById('minted-count').textContent = formatNumber(data.statusSliders.mint.minted);
                document.getElementById('minted-percent').textContent = `${data.statusSliders.mint.percentMinted} Minted`;

                document.getElementById('broken-slider').innerHTML = `<div class="slider-fill-blue" style="width: ${100 - parseFloat(data.statusSliders.broken.percentBroken)}%;"></div><div class="slider-fill-gray" style="width: ${data.statusSliders.broken.percentBroken};"></div>`;
                document.getElementById('unbroken-count').textContent = formatNumber(data.statusSliders.broken.unBroken);
                document.getElementById('broken-count').textContent = formatNumber(data.statusSliders.broken.broken);
                document.getElementById('broken-percent').textContent = `${data.statusSliders.broken.percentBroken} Broken`;

                // Key Metrics
                document.getElementById('daodao-staked').textContent = formatNumber(data.keyMetrics.daodaoStaked);
                document.getElementById('daodao-change').textContent = `${formatChange(data.keyMetrics.daodaoChange30d)} (30d)`;
                document.getElementById('dao-members').textContent = formatNumber(data.keyMetrics.daoMembers);
                document.getElementById('dao-members-change').textContent = `${formatChange(data.keyMetrics.daoMembersChange30d)} (30d)`;
                document.getElementById('enterprise-staked').textContent = formatNumber(data.keyMetrics.enterpriseStaked);
                document.getElementById('enterprise-change').textContent = `${formatChange(data.keyMetrics.enterpriseChange30d)} (30d)`;
                document.getElementById('dao-treasury').textContent = formatNumber(data.keyMetrics.daoTreasuryUSD);
                document.getElementById('dao-tla-vp').textContent = formatNumber(data.keyMetrics.daoTlaVp);
                
                // Static LUNA Backing
                document.getElementById('backing-per-nft').textContent = data.keyMetrics.backingInLuna.toFixed(2);
                document.getElementById('backing-per-nft-change').textContent = `Avg. Daily Gain / NFT: +${data.keyMetrics.avgDailyGain.toFixed(2)} LUNA`;

                // Live Proposals
                const liveProposalsCount = data.keyMetrics.liveProposals;
                const liveProposalsCountElement = document.getElementById('live-proposals-count');
                const liveProposalsTitleElement = document.getElementById('live-proposals-title');
                liveProposalsCountElement.textContent = liveProposalsCount;
                const existingDot = liveProposalsTitleElement.querySelector('.pulse-dot, .static-dot-red');
                if (existingDot) existingDot.remove();
                const newDot = document.createElement('span');
                newDot.className = liveProposalsCount > 0 ? 'pulse-dot' : 'static-dot-red';
                liveProposalsTitleElement.appendChild(newDot);
                
                // Fetch live price for Backing in USD
                try {
                    const response = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=terra-luna-2&vs_currencies=usd');
                    const priceData = await response.json();
                    const lunaPriceUSD = priceData['terra-luna-2'].usd;
                    const backingInUSD = data.keyMetrics.backingInLuna * lunaPriceUSD;
                    
                    document.getElementById('backing-per-nft-usd').textContent = `$${backingInUSD.toFixed(2)}`;
                    document.getElementById('live-luna-price').textContent = `@ $${lunaPriceUSD.toFixed(4)} / LUNA`;
                } catch (error) {
                    console.error("Failed to fetch live LUNA price:", error);
                    // Fallback if API fails
                     document.getElementById('backing-per-nft-usd').textContent = 'Error';
                    document.getElementById('live-luna-price').textContent = 'Could not fetch price';
                }


                // Marketplace Summary
                document.getElementById('marketplace-snapshot').textContent = `Marketplace Snapshot Taken ${data.marketplace.snapshotDate}`;
                document.getElementById('bbl-sales-30d').textContent = formatNumber(data.marketplace.bblSales30d);
                document.getElementById('bbl-volume').textContent = data.marketplace.bblVolumeAllTime;
                document.getElementById('boost-sales-30d').textContent = formatNumber(data.marketplace.boostSales30d);
                document.getElementById('boost-volume').textContent = data.marketplace.boostVolumeAllTime;

                // Marketplace NFT Cards
                const createNftCard = (nft, marketplace, type) => {
                    const card = document.createElement('div');
                    card.className = 'activity-card rounded-lg';
                    let statusClass = '', statusText = '';
                    if (type === 'listed') {
                        statusClass = marketplace === 'bbl' ? 'status-bbl' : 'status-boost';
                        statusText = marketplace.toUpperCase();
                    } else { // sold
                        statusClass = 'status-liquid';
                        statusText = '&nbsp;';
                    }
                    
                    card.innerHTML = `
                        <div class="relative">
                            <img src="https://dweb.link/ipfs/bafybeiek4cv2w6ot767nriveyzagejnvzpw3qr2b7iyc6ccddid6jj77za/${nft.id}.png" alt="NFT #${nft.id}" class="w-full h-auto">
                            <div class="broken-overlay ${!nft.broken ? 'hidden' : ''}"><div class="broken-banner">Broken</div></div>
                        </div>
                        <div class="status-bar p-2 flex justify-between items-center">
                            <span class="font-bold text-md text-white">NFT #${nft.id}</span>
                            <span class="status-text ${statusClass} flex items-center gap-2">${statusText}
                                ${nft.broken ? `<span class="toggle-broken-btn" title="Show Original Image"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye" viewBox="0 0 16 16"><path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.816 1.097-2.28 2.48-4.232 3.489C8.68 12.83 7.12 13.5 5 13.5 2.88 13.5 1.321 12.83.172 11.489A13.133 13.133 0 0 1 1.172 8z"/><path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"/></svg></span>` : ''}
                            </span>
                        </div>
                        <div class="p-3 text-center"><p class="text-sm text-cyan-400 font-semibold">${nft.price}</p></div>
                    `;
                    card.addEventListener('click', (e) => {
                        // Prevent the eye icon click from triggering the modal
                        if (!e.target.closest('.toggle-broken-btn')) {
                            showNftDetails(nft);
                        }
                    });
                    return card;
                };

                const bblSoldContainer = document.getElementById('bbl-sold-container');
                bblSoldContainer.innerHTML = ''; // Clear existing
                data.marketplace.bbl.sold.forEach(nft => bblSoldContainer.appendChild(createNftCard(nft, 'bbl', 'sold')));

                const bblListedContainer = document.getElementById('bbl-listed-container');
                bblListedContainer.innerHTML = '';
                data.marketplace.bbl.listed.forEach(nft => bblListedContainer.appendChild(createNftCard(nft, 'bbl', 'listed')));
                
                const boostSoldContainer = document.getElementById('boost-sold-container');
                boostSoldContainer.innerHTML = '';
                data.marketplace.boost.sold.forEach(nft => boostSoldContainer.appendChild(createNftCard(nft, 'boost', 'sold')));
                
                const boostListedContainer = document.getElementById('boost-listed-container');
                boostListedContainer.innerHTML = '';
                data.marketplace.boost.listed.forEach(nft => boostListedContainer.appendChild(createNftCard(nft, 'boost', 'listed')));
                
                attachToggleListeners();
            }

             // --- NFT Detail Modal Logic ---
            const nftDetailModal = document.getElementById('nftDetailModal');
            const closeNftDetailModalBtn = document.getElementById('closeNftDetailModal');
            
            function showNftDetails(nft) {
                const nftData = dashboardData.marketplace.nftTraits[nft.id];
                if (!nftData) return; // Don't open if no data

                document.getElementById('modalNftImage').src = `https://dweb.link/ipfs/bafybeiek4cv2w6ot767nriveyzagejnvzpw3qr2b7iyc6ccddid6jj77za/${nft.id}.png`;
                document.getElementById('modalNftTitle').textContent = `NFT #${nft.id}`;
                document.getElementById('modalNftPrice').textContent = nft.price;
                document.getElementById('modalNftRank').textContent = `Rank: #${nftData.rank}`;

                const traitsContainer = document.getElementById('modalNftTraits');
                traitsContainer.innerHTML = '';
                // The order of traits you want to display
                const traitOrder = ["Background", "Light", "Weather", "Object", "Inhabitant"];
                traitOrder.forEach(trait => {
                    if (nftData[trait]) {
                        traitsContainer.innerHTML += `
                            <div class="flex justify-between items-center text-sm bg-gray-800/50 p-2 rounded">
                                <span class="font-semibold text-gray-400">${trait}</span>
                                <span class="text-white">${nftData[trait]}</span>
                            </div>
                        `;
                    }
                });
                
                nftDetailModal.classList.remove('hidden', 'opacity-0');
                setTimeout(() => nftDetailModal.querySelector('.modal-content').classList.remove('scale-95', 'opacity-0'), 10);
            }

            function closeNftDetails() {
                nftDetailModal.classList.add('opacity-0');
                nftDetailModal.querySelector('.modal-content').classList.add('scale-95', 'opacity-0');
                setTimeout(() => nftDetailModal.classList.add('hidden'), 300);
            }

            closeNftDetailModalBtn.addEventListener('click', closeNftDetails);
            nftDetailModal.addEventListener('click', (e) => {
                if(e.target === nftDetailModal) closeNftDetails();
            });


            // Function to attach listeners to "eye" icons
            function attachToggleListeners() {
                const toggleButtons = document.querySelectorAll('.toggle-broken-btn');
                toggleButtons.forEach(button => {
                    button.addEventListener('click', function(e) {
                        e.stopPropagation(); // Stop click from bubbling up to the card
                        const card = this.closest('.activity-card');
                        if (card) {
                            const overlay = card.querySelector('.broken-overlay');
                            if (overlay) {
                                overlay.classList.toggle('hidden');
                            }
                        }
                    });
                });
            }

            // --- Initial Page Load ---
            updateUI(dashboardData);

            // --- Disclaimer Banner Logic ---
            const banner = document.getElementById('disclaimer-banner');
            const closeButton = document.getElementById('close-banner');
            if (banner && closeButton) {
                closeButton.addEventListener('click', () => {
                    banner.style.display = 'none';
                });
            }
        });
    </script>
</body>
</html>

