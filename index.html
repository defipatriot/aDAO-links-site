<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alliance DAO Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <script>
      window.va = window.va || function () { (window.va.q = window.va.q || []).push(arguments); };
    </script>
    <script src="/_vercel/insights/script.js" defer></script>
    <style>
        /* --- Base Styles --- */
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: #0D0D0D;
            color: #EAEAEA;
        }

        /* --- Card Styles --- */
        .stat-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        .stat-card:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(45, 212, 191, 0.5);
        }
        .info-card {
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 1.5rem;
        }
        .info-card .icon {
            font-size: 1.75rem;
            margin-bottom: 0.75rem;
            color: #2dd4bf; /* teal-400 */
        }
        .info-card h3 {
            font-size: 1.125rem;
            font-weight: 700;
            color: #fff;
            margin-bottom: 0.5rem;
        }
        .info-card p, .info-card .link-text {
            font-size: 0.875rem;
            color: #9ca3af; /* gray-400 */
            line-height: 1.5;
            flex-grow: 1; /* Allows text to take up space */
        }
         .info-card .link-group {
            margin-top: 1rem;
        }
        .info-card a:hover .link-text, .info-card a:hover h3, .info-card .link-text a:hover {
            color: #2dd4bf;
        }
        .stat-card .subtext {
            min-height: 1.25rem; /* Ensures space is reserved for subtext */
        }

        /* --- Slider Styles --- */
        .slider-bar {
            display: flex;
            height: 0.75rem;
            border-radius: 9999px;
            overflow: hidden;
            position: relative;
        }
        .slider-fill-blue {
            background: linear-gradient(90deg, #00F2FE, #2889FC);
        }
        .slider-fill-gray {
            background-color: #374151; /* gray-700 */
        }

        /* --- Marketplace Card Styles --- */
        .activity-card {
             background: #1A1A1A;
             border: 1px solid #2e2e2e;
             transition: all 0.3s ease;
             position: relative;
             overflow: hidden;
             cursor: pointer;
        }
        .activity-card:hover {
            transform: translateY(-5px);
            border-color: #2dd4bf;
        }
        .marketplace-link:hover .marketplace-text {
            color: #2dd4bf;
        }
        .status-bar {
            background-color: #000000;
        }
        .status-text {
            font-weight: 800;
            text-transform: uppercase;
        }
        .status-daodao { color: #38bdf8; }
        .status-enterprise { color: #4ade80; }
        .status-liquid { color: #facc15; }
        .status-bbl { color: #9ca3af; }
        .status-boost { color: #60a5fa; }
        .status-unminted {
            background: linear-gradient(90deg, #a855f7, #ec4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .broken-overlay {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            pointer-events: none;
        }
        .broken-overlay.hidden {
            display: none;
        }
        .broken-banner {
            position: absolute;
            background-color: rgba(239, 68, 68, 0.8);
            color: white;
            font-size: 1.25rem;
            font-weight: 800;
            padding: 0.5rem 4rem;
            transform: rotate(-30deg);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            border: 2px solid rgba(255, 255, 255, 0.8);
        }
        .toggle-broken-btn {
            cursor: pointer;
            color: #9ca3af;
            transition: color 0.2s;
            pointer-events: all; /* Make sure eye icon is clickable */
        }
        .toggle-broken-btn:hover {
            color: white;
        }
        
        /* --- Pulse Animation for Live Proposals --- */
        .pulse-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: #4ade80; /* green-400 */
            animation: pulse 2s infinite;
            box-shadow: 0 0 0 0 rgba(74, 222, 128, 1);
        }
        @keyframes pulse {
            0% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(74, 222, 128, 0.7); }
            70% { transform: scale(1); box-shadow: 0 0 0 10px rgba(74, 222, 128, 0); }
            100% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(74, 222, 128, 0); }
        }

        /* --- Red Static Dot for No Proposals --- */
        .static-dot-red {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: #ef4444; /* red-500 */
        }
        
        /* --- Modal Styles (Generic) --- */
        .modal {
            transition: opacity 0.3s ease;
        }
        .modal.hidden {
            pointer-events: none;
        }
        .modal .modal-content {
            transition: transform 0.3s ease, opacity 0.3s ease;
        }
        .modal.hidden .modal-content {
            transform: scale(0.95);
            opacity: 0;
        }
    </style>
</head>
<body class="antialiased">

    <!-- Header Section -->
    <header class="py-4">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex justify-between items-center">
            <!-- Left: Logo (Not a link on the dashboard page) -->
            <div class="flex-shrink-0 w-32">
                <img src="https://raw.githubusercontent.com/defipatriot/aDAO-Image-Files/main/Alliance%20DAO%20Logo.png" alt="Alliance DAO Logo" class="h-16 w-auto">
            </div>
            <!-- Center: Navigation Tiles -->
            <nav class="flex-1 flex justify-center items-center space-x-6">
                <a href="nft-explorer.html" class="bg-gray-800/50 hover:bg-gray-700/80 border border-gray-700 text-white font-bold py-3 px-8 rounded-lg shadow-lg transition-all transform hover:scale-105">
                    NFT Explorer
                </a>
                <a href="planet-map.html" class="bg-gray-800/50 hover:bg-gray-700/80 border border-gray-700 text-white font-bold py-3 px-8 rounded-lg shadow-lg transition-all transform hover:scale-105">
                    Galaxy Map
                </a>
            </nav>
            <!-- Right: Terra Logo -->
            <div class="w-32 flex-shrink-0 flex justify-end">
                <img src="https://raw.githubusercontent.com/defipatriot/aDAO-Image-Planets-Empty/main/Terra.PNG" alt="Terra Logo" class="h-16 w-auto">
            </div>
        </div>
    </header>

    <!-- CoinGecko Price Marquee -->
    <div class="py-2 border-b border-gray-800">
        <script src="https://widgets.coingecko.com/gecko-coin-price-marquee-widget.js"></script>
        <gecko-coin-price-marquee-widget locale="en" dark-mode="true" outlined="true" coin-ids="terra-luna-2,capapult,solid-2,eris-amplified-luna,bitcoin,ethereum,backbone-labs-staked-luna,lion-dao,astroport-fi,cosmos" initial-currency="usd"></gecko-coin-price-marquee-widget>
    </div>


    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        
        <!-- Disclaimer Banner -->
        <div id="disclaimer-banner" class="bg-yellow-500/10 border border-yellow-400/30 text-yellow-300 px-4 py-3 rounded-lg relative mb-8 text-center" role="alert">
            <strong class="font-bold">Please Note:</strong>
            <span class="block sm:inline">Tiles with a <span class="inline-block w-2.5 h-2.5 rounded-full bg-red-500 mx-1 align-middle"></span> are from a snapshot. Tiles with a <span class="inline-block w-2.5 h-2.5 rounded-full bg-green-400 mx-1 align-middle"></span> are from a live feed updated by Deving.zone every 1-6 hours.</span>
            <span id="close-banner" class="absolute top-0 bottom-0 right-0 px-4 py-3 cursor-pointer">
                <svg class="fill-current h-6 w-6 text-yellow-400" role="button" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><title>Close</title><path d="M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"/></svg>
            </span>
        </div>

        <!-- Top Info Cards Section -->
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <a href="ally.html" class="stat-card info-card rounded-xl group">
                <i class="fas fa-layer-group icon"></i>
                <h3 class="group-hover:text-teal-400">ALLY Rewards</h3>
                <p>A pioneering collection backed by LUNA staking rewards. Your share of the pool grows as others claim theirs.</p>
                <span class="link-text link-group">Learn More &rarr;</span>
            </a>
            <div class="flex flex-col gap-4">
                 <a href="tutorials.html" class="stat-card info-card rounded-xl group flex-1">
                      <i class="fas fa-video icon !mb-2"></i>
                      <h3 class="group-hover:text-teal-400 !mb-0">Tutorials & Guides</h3>
                 </a>
                 <a href="news.html" class="stat-card info-card rounded-xl group flex-1">
                      <i class="fas fa-newspaper icon !mb-2"></i>
                      <h3 class="group-hover:text-teal-400 !mb-0">Ecosystem News</h3>
                 </a>
            </div>
             <div class="flex flex-col gap-4">
                <a href="rarity-explained.html" class="stat-card info-card rounded-xl group flex-1">
                     <i class="fas fa-gem icon !mb-2"></i>
                     <h3 class="group-hover:text-teal-400 !mb-0">Rarity Info</h3>
                </a>
                <a href="release-history.html" class="stat-card info-card rounded-xl group flex-1">
                     <i class="fas fa-stream icon !mb-2"></i>
                     <h3 class="group-hover:text-teal-400 !mb-0">NFT Release History</h3>
                </a>
            </div>
            <div class="flex flex-col gap-4">
                <a href="links.html" class="stat-card info-card rounded-xl group flex-1">
                     <i class="fas fa-link icon !mb-2"></i>
                     <h3 class="group-hover:text-teal-400 !mb-0">Official Links</h3>
                </a>
                <a href="alliances.html" class="stat-card info-card rounded-xl group flex-1">
                     <i class="fas fa-handshake icon !mb-2"></i>
                     <h3 class="group-hover:text-teal-400 !mb-0">Our Alliances</h3>
                </a>
            </div>
        </div>
        
        <!-- Status Sliders Section -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
            <!-- Mint Status -->
            <div class="stat-card p-4 rounded-xl">
                <div class="flex justify-between items-center text-sm font-medium text-gray-300">
                    <span>Un-minted</span>
                    <h3 class="text-base font-semibold text-gray-400">Mint Status</h3>
                    <span>Minted</span>
                </div>
                <div id="mint-slider" class="slider-bar mt-2">
                    <!-- Slider will be generated by JS -->
                </div>
                <div class="flex justify-between text-sm font-bold text-white mt-2">
                    <span id="unminted-count">...</span>
                    <span id="minted-percent" class="text-center text-cyan-400">...</span>
                    <span id="minted-count">...</span>
                </div>
            </div>
            <!-- Broken Status -->
            <div class="stat-card p-4 rounded-xl">
                <div class="flex justify-between items-center text-sm font-medium text-gray-300">
                    <span>Un-Broken</span>
                    <h3 class="text-base font-semibold text-gray-400">Broken Status</h3>
                    <span>Broken</span>
                </div>
                <div id="broken-slider" class="slider-bar mt-2">
                    <!-- Slider will be generated by JS -->
                </div>
                <div class="flex justify-between text-sm font-bold text-white mt-2">
                    <span id="unbroken-count">...</span>
                    <div class="text-center">
                        <p id="broken-percent" class="text-cyan-400 text-xs">...</p>
                    </div>
                    <span id="broken-count">...</span>
                </div>
            </div>
        </div>

        <!-- Historical Charts Link -->
        <a href="graphs.html" class="stat-card rounded-xl group flex items-center justify-center text-center p-6 mb-8">
             <i class="fas fa-chart-line icon mr-4"></i>
             <div>
                 <h3 class="text-xl font-bold group-hover:text-teal-400">View Historical Data & Charts</h3>
                 <p class="text-gray-400">Explore detailed charts on backing, sales, and forward-looking projections.</p>
             </div>
        </a>

        <!-- Key Metrics Section -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-6 mb-8">
            <!-- ROW 1 -->
            <div id="daodao-staked-card" class="stat-card p-6 rounded-xl text-center cursor-pointer group">
                <div>
                    <h3 id="daodao-staked-title" class="text-md font-medium text-gray-400 flex justify-center items-center gap-2 group-hover:text-teal-400">DAODAO Staked</h3>
                    <p id="daodao-staked" class="text-3xl font-bold text-white mt-2">...</p>
                </div>
                <p class="subtext text-xs font-semibold mt-1 text-gray-500">Click to see details</p>
            </div>
            <div id="enterprise-staked-card" class="stat-card p-6 rounded-xl text-center cursor-pointer group">
                <div>
                    <h3 id="enterprise-staked-title" class="text-md font-medium text-gray-400 flex justify-center items-center gap-2 group-hover:text-teal-400">Enterprise Staked</h3>
                    <p id="enterprise-staked-holder" class="text-3xl font-bold text-white mt-2">...</p>
                </div>
                <p class="subtext text-xs font-semibold mt-1 text-gray-500">Click to see details</p>
            </div>
            <a href="https://daodao.zone/dao/terra1sffd4efk2jpdt894r04qwmtjqrrjfc52tmj6vkzjxqhd8qqu2drs3m5vzm/members" target="_blank" rel="noopener noreferrer" class="stat-card p-6 rounded-xl text-center group">
                <div>
                    <h3 id="dao-members-title" class="text-md font-medium text-gray-400 flex justify-center items-center gap-2">DAO Members</h3>
                    <p id="dao-members" class="text-3xl font-bold text-white mt-2">...</p>
                </div>
                 <p class="subtext text-xs font-semibold mt-1 text-gray-500">Click link to site</p>
            </a>
            <div id="dao-broken-card" class="stat-card p-6 rounded-xl text-center cursor-pointer group">
                 <div>
                    <h3 class="text-md font-medium text-gray-400 group-hover:text-teal-400">DAO Broken/Held NFTs</h3>
                    <p id="dao-broken-total" class="text-3xl font-bold text-white mt-2">...</p>
                </div>
                 <p class="subtext text-xs font-semibold mt-1 text-gray-500">Click to see details</p>
            </div>
            <!-- ROW 2 -->
            <div id="dao-treasury-card" class="stat-card p-6 rounded-xl text-center cursor-pointer group">
                <div>
                    <h3 id="dao-treasury-title" class="text-md font-medium text-gray-400 group-hover:text-teal-400 flex justify-center items-center gap-2">DAO Treasury</h3>
                    <p id="dao-treasury-total" class="text-3xl font-bold text-white mt-2">...</p>
                </div>
                <p class="subtext text-xs font-semibold mt-1 text-gray-500">Click to see details</p>
            </div>
             <div id="dao-tla-card" class="stat-card p-6 rounded-xl text-center cursor-pointer group">
                <div>
                    <h3 id="dao-tla-title" class="text-md font-medium text-gray-400 group-hover:text-teal-400 flex justify-center items-center gap-2">DAO TLA Deposits</h3>
                    <p id="dao-tla-total" class="text-3xl font-bold text-white mt-2">...</p>
                </div>
                 <p class="subtext text-xs font-semibold mt-1 text-gray-500">Click to see details</p>
            </div>
             <div id="dao-tla-vp-card" class="stat-card p-6 rounded-xl text-center cursor-pointer group">
                 <div>
                    <h3 id="dao-tla-vp-title" class="text-md font-medium text-gray-400 group-hover:text-teal-400 flex justify-center items-center gap-2">DAO TLA VP</h3>
                    <p id="dao-tla-vp" class="text-xl font-bold text-white mt-2">...</p>
                    <p id="dao-tla-vp-usd" class="text-base font-semibold text-gray-300">...</p>
                </div>
                 <p class="subtext text-xs font-semibold mt-1 text-gray-500">Click to see details</p>
            </div>
            <div id="unminted-backing-card" class="stat-card p-6 rounded-xl text-center cursor-pointer group">
                 <div>
                    <h3 class="text-md font-medium text-gray-400 group-hover:text-teal-400">Unminted NFT Backing</h3>
                    <p id="unminted-nft-backing-luna" class="text-xl font-bold text-white mt-2">...</p>
                    <p id="unminted-nft-backing-usd" class="text-base font-semibold text-gray-300">...</p>
                </div>
                 <p class="subtext text-xs font-semibold mt-1 text-gray-500">Click to see details</p>
            </div>

            <!-- ROW 3 -->
            <div class="stat-card p-6 rounded-xl text-center">
                <div>
                    <h3 id="backing-ampluna-title" class="text-md font-medium text-gray-400 flex justify-center items-center gap-2">Backing in ampLUNA</h3>
                    <div class="flex justify-center items-center gap-2 mt-2">
                        <p id="backing-per-nft-ampluna" class="text-3xl font-bold text-white">...</p>
                        <img src="https://raw.githubusercontent.com/defipatriot/aDAO-Image-Files/main/ampLuna.webp?raw=true" alt="ampLUNA" class="h-8 w-8">
                    </div>
                </div>
                 <p id="backing-per-nft-change" class="subtext text-xs font-semibold mt-1">&nbsp;</p>
            </div>
            <div class="stat-card p-6 rounded-xl text-center">
                <div>
                    <h3 id="backing-luna-live-title" class="text-md font-medium text-gray-400 flex justify-center items-center gap-2">Backing in LUNA</h3>
                    <div class="flex justify-center items-center gap-2 mt-2">
                        <p id="backing-per-nft-luna-live" class="text-3xl font-bold text-white">...</p>
                        <img src="https://raw.githubusercontent.com/defipatriot/aDAO-Image-Files/main/Luna.webp?raw=true" alt="LUNA" class="h-8 w-8">
                    </div>
                </div>
                <p id="live-ampluna-price-luna" class="subtext text-xs font-semibold mt-1 text-gray-500">...</p>
            </div>
            <div class="stat-card p-6 rounded-xl text-center">
                <div>
                    <h3 id="backing-usd-title" class="text-md font-medium text-gray-400 flex justify-center items-center gap-2">Backing in USD</h3>
                    <p id="backing-per-nft-usd" class="text-3xl font-bold text-white mt-2">...</p>
                </div>
                <p id="live-luna-price" class="subtext text-xs font-semibold mt-1 text-gray-500">...</p>
            </div>
            <div class="stat-card p-6 rounded-xl text-center">
                 <div>
                    <h3 id="avg-daily-gain-title" class="text-md font-medium text-gray-400 flex justify-center items-center gap-2">Avg Daily Gain Per NFT</h3>
                    <p id="avg-daily-gain" class="text-3xl font-bold text-white mt-2">...</p>
                </div>
                <p id="avg-daily-gain-subtext" class="subtext text-xs font-semibold mt-1 text-gray-500">...</p>
            </div>
        </div>

        <!-- Marketplace Activity Section -->
        <div class="mt-12">
            <div class="stat-card rounded-xl p-6 mb-8">
                 <h2 class="text-3xl font-bold text-white text-center">Marketplace Activity</h2>
                 <p id="marketplace-snapshot" class="text-lg text-cyan-400 font-semibold text-center">...</p>
                 <div class="mt-4 grid grid-cols-2 md:grid-cols-4 gap-6 text-center border-t border-gray-700 pt-4">
                    <div><p class="text-md font-medium text-gray-400">Last 30 Days Sales (BBL)</p><p id="bbl-sales-30d" class="text-2xl font-bold text-white">...</p></div>
                     <div><p class="text-md font-medium text-gray-400">All Time Sales Volume (BBL)</p><p id="bbl-volume" class="text-2xl font-bold text-white">...</p></div>
                    <div><p class="text-md font-medium text-gray-400">Last 30 Days Sales (Boost)</p><p id="boost-sales-30d" class="text-2xl font-bold text-white">...</p></div>
                     <div><p class="text-md font-medium text-gray-400">All Time Sales (Boost)</p><p id="boost-volume" class="text-2xl font-bold text-white">...</p></div>
                </div>
            </div>

            <!-- BBL Marketplace -->
            <div class="mb-12">
                 <a href="https://app.backbonelabs.io/nfts/marketplace/collections/terra1phr9fngjv7a8an4dhmhd0u0f98wazxfnzccqtyheq4zqrrp4fpuqw3apw9" target="_blank" rel="noopener noreferrer" class="marketplace-link flex items-center justify-center mb-6 group">
                     <img src="https://raw.githubusercontent.com/defipatriot/aDAO-Image-Files/main/BBL%20Logo.png" alt="BackBone Labs Logo" class="h-10 w-auto">
                 </a>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div>
                        <h4 class="text-lg font-semibold text-gray-300 mb-4 text-center">Recently Sold</h4>
                        <div id="bbl-sold-container" class="grid grid-cols-2 gap-4"></div>
                    </div>
                    <div>
                        <h4 class="text-lg font-semibold text-gray-300 mb-4 text-center">Recently Listed</h4>
                        <div id="bbl-listed-container" class="grid grid-cols-2 gap-4"></div>
                    </div>
                </div>
            </div>

            <!-- Boost Marketplace -->
            <div>
                 <a href="https://www.boostdao.io/ignite/permissionless-terra" target="_blank" rel="noopener noreferrer" class="marketplace-link flex items-center justify-center mb-6 group">
                     <img src="https://raw.githubusercontent.com/defipatriot/aDAO-Image-Files/main/Boost%20Logo.png" alt="Boost Logo" class="h-10 w-auto mr-4">
                     <h3 class="text-2xl font-bold text-white group-hover:text-cyan-400 transition-colors marketplace-text">Boost Ignite</h3>
                 </a>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div>
                        <h4 class="text-lg font-semibold text-gray-300 mb-4 text-center">Recently Sold</h4>
                        <div id="boost-sold-container" class="grid grid-cols-2 gap-4"></div>
                    </div>
                    <div>
                        <h4 class="text-lg font-semibold text-gray-300 mb-4 text-center">Recently Listed</h4>
                        <div id="boost-listed-container" class="grid grid-cols-2 gap-4"></div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    
    <!-- Modals -->
    <div id="nftDetailModal" class="modal fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-50 hidden opacity-0">
        <div class="modal-content bg-[#1a1a1a] border border-gray-700 rounded-xl shadow-xl w-full max-w-4xl relative text-white opacity-0 scale-95">
            <button id="closeNftDetailModal" class="absolute top-4 right-4 text-gray-400 hover:text-white text-3xl">&times;</button>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 p-8">
                <div>
                    <img id="modalNftImage" src="" alt="NFT Image" class="w-full h-auto rounded-lg">
                </div>
                <div>
                    <div class="flex items-center gap-4 mb-2">
                        <h3 id="modalNftTitle" class="text-3xl font-bold text-cyan-400"></h3>
                        <span id="modalNftRank" class="bg-cyan-500 text-white text-sm font-bold px-3 py-1 rounded-full"></span>
                    </div>
                    <p id="modalNftPrice" class="text-xl text-gray-300 mb-6"></p>
                    <div class="space-y-3 text-left">
                         <h4 class="text-xl font-semibold border-b border-gray-600 pb-2 mb-2">Traits</h4>
                         <div id="modalNftTraits" class="space-y-2"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="daodaoModal" class="modal fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-50 hidden opacity-0">
        <div class="modal-content bg-[#1a1a1a] border border-gray-700 rounded-xl shadow-xl w-full max-w-3xl relative text-white opacity-0 scale-95 p-8">
            <button class="modal-close absolute top-4 right-4 text-gray-400 hover:text-white text-3xl">&times;</button>
            <h3 class="text-2xl font-bold text-cyan-400 mb-4">DAODAO Staking Details</h3>
             <div class="border-t border-gray-700 pt-4 mt-4">
                <h4 class="font-bold text-lg text-white mb-2">Staking on DAODAO (<span id="daodao-modal-holder-count">...</span> NFTs)</h4>
                <div id="daodao-stakers-table" class="text-center p-4">Loading staker data...</div>
            </div>
        </div>
    </div>

    <div id="enterpriseModal" class="modal fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-50 hidden opacity-0">
        <div class="modal-content bg-[#1a1a1a] border border-gray-700 rounded-xl shadow-xl w-full max-w-3xl relative text-white opacity-0 scale-95 p-8">
            <button class="modal-close absolute top-4 right-4 text-gray-400 hover:text-white text-3xl">&times;</button>
            <h3 class="text-2xl font-bold text-cyan-400 mb-4">Enterprise Staking Details</h3>
            <div class="space-y-4 text-gray-300">
                <div class="bg-blue-900/30 border border-blue-700 p-3 rounded-lg">
                    <p class="font-bold text-lg text-white">Action Required: Migrate Your NFTs</p>
                    <p>The Alliance DAO has officially migrated its governance from Enterprise to DAODAO. Any members who have not yet migrated their NFTs must do so to participate in governance proposals, promotions, and future DAO-distributed rewards.</p>
                </div>
                <a href="tutorials.html" class="inline-block bg-cyan-600 hover:bg-cyan-700 text-white font-bold py-2 px-4 rounded-lg transition-colors mt-2">View Migration Tutorial &rarr;</a>
                <div class="border-t border-gray-700 pt-4 mt-4">
                    <h4 class="font-bold text-lg text-white mb-2">Holder Staking on Enterprise (<span id="enterprise-modal-holder-count">...</span> NFTs)</h4>
                    <div id="enterprise-stakers-table" class="text-center p-4">Loading staker data...</div>
                </div>
            </div>
        </div>
    </div>
    
    <div id="daoBrokenModal" class="modal fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-50 hidden opacity-0">
         <div class="modal-content bg-[#1a1a1a] border border-gray-700 rounded-xl shadow-xl w-full max-w-2xl relative text-white opacity-0 scale-95 p-8">
            <button class="modal-close absolute top-4 right-4 text-gray-400 hover:text-white text-3xl">&times;</button>
            <h3 class="text-2xl font-bold text-cyan-400 mb-4">DAO Broken/Held NFTs</h3>
            <div class="space-y-4 text-gray-300">
                <p>The DAO currently holds 1,000 broken NFTs which are used for various purposes including liquidity and strategic reserves. These are held across three separate DAO wallets:</p>
                <ul class="list-disc list-inside space-y-2 bg-gray-800/50 p-4 rounded-lg">
                    <li><strong class="text-yellow-400">900 NFTs (Liquid):</strong> Held in two wallets, available for liquidity purposes.
                        <ul class="list-circle list-inside ml-6 text-sm">
                            <li>Wallet ending in: ...8ywv</li>
                            <li>Wallet ending in: ...417v</li>
                        </ul>
                    </li>
                    <li><strong class="text-green-400">100 NFTs (Staked):</strong> Held in the Enterprise staking wallet.
                         <ul class="list-circle list-inside ml-6 text-sm">
                            <li>Wallet ending in: ...6ugw</li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    
    <div id="unmintedModal" class="modal fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-50 hidden opacity-0">
         <div class="modal-content bg-[#1a1a1a] border border-gray-700 rounded-xl shadow-xl w-full max-w-2xl relative text-white opacity-0 scale-95 p-8">
            <button class="modal-close absolute top-4 right-4 text-gray-400 hover:text-white text-3xl">&times;</button>
            <h3 class="text-2xl font-bold text-cyan-400 mb-4">Unminted NFT Backing Calculation</h3>
            <div class="space-y-4 text-gray-300">
                <p>This value represents the total backing of all DAO-held NFTs that have not yet been minted. It is calculated by multiplying the total number of unminted NFTs by the live backing value per NFT.</p>
                <div class="bg-yellow-900/30 border border-yellow-700 p-3 rounded-lg text-sm">
                    <p><strong class="text-yellow-300">Important Note:</strong> The backing is a "worst-case" or baseline value. This calculation does not factor in additional value derived from the art, DAO Voting Power (VP), or the ability to stake the NFT to participate in governance and earn DAO-distributed rewards. For context, even a broken NFT has a current floor price of ~249 bLUNA, highlighting the significant value beyond its liquid backing.</p>
                </div>
                <div class="bg-gray-800/50 p-4 rounded-lg mt-4 text-center">
                     <p class="text-lg font-mono">
                        <span id="unminted-modal-count">...</span> Unminted NFTs * <span id="unminted-modal-backing-luna">...</span> LUNA
                        <br> = <strong class="text-cyan-400 text-xl" id="unminted-modal-total-luna">... LUNA</strong>
                    </p>
                    <hr class="border-gray-600 my-2">
                     <p class="text-lg font-mono">
                        <span id="unminted-modal-count-2">...</span> Unminted NFTs * $<span id="unminted-modal-backing-usd">...</span> USD
                        <br> = <strong class="text-cyan-400 text-xl" id="unminted-modal-total-usd">... USD</strong>
                    </p>
                </div>
            </div>
        </div>
    </div>
    
    <div id="treasuryModal" class="modal fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-50 hidden opacity-0">
        <div class="modal-content bg-[#1a1a1a] border border-gray-700 rounded-xl shadow-xl w-full max-w-2xl relative text-white opacity-0 scale-95 p-8">
            <button class="modal-close absolute top-4 right-4 text-gray-400 hover:text-white text-3xl">&times;</button>
            <h3 class="text-2xl font-bold text-cyan-400 mb-4">DAO Treasury Details</h3>
            <div id="treasury-table-container" class="max-h-96 overflow-y-auto">
                <!-- Treasury table will be injected here -->
            </div>
        </div>
    </div>
    
    <div id="tlaModal" class="modal fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-50 hidden opacity-0">
        <div class="modal-content bg-[#1a1a1a] border border-gray-700 rounded-xl shadow-xl w-full max-w-2xl relative text-white opacity-0 scale-95 p-8">
            <button class="modal-close absolute top-4 right-4 text-gray-400 hover:text-white text-3xl">&times;</button>
            <h3 class="text-2xl font-bold text-cyan-400 mb-4">DAO TLA Deposit Details</h3>
            <div id="tla-table-container" class="max-h-96 overflow-y-auto">
                <!-- TLA table will be injected here -->
            </div>
        </div>
    </div>

    <div id="tlaVpModal" class="modal fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-50 hidden opacity-0">
        <div class="modal-content bg-[#1a1a1a] border border-gray-700 rounded-xl shadow-xl w-full max-w-3xl relative text-white opacity-0 scale-95 p-8">
            <button class="modal-close absolute top-4 right-4 text-gray-400 hover:text-white text-3xl">&times;</button>
            <h3 class="text-2xl font-bold text-cyan-400 mb-4">DAO TLA VP Details</h3>
            <div class="space-y-4 text-gray-300">
                <div class="text-center bg-gray-800/50 p-4 rounded-lg">
                    <p class="text-lg">Total Underlying Assets</p>
                    <p class="text-2xl font-bold text-white" id="tla-vp-modal-luna">~... LUNA</p>
                    <p class="text-xl text-cyan-400" id="tla-vp-modal-usd">($...)</p>
                </div>
                <div id="tla-vp-locks-container">
                    <!-- Lock details will be injected here -->
                </div>
            </div>
        </div>
    </div>

    <div id="logoModal" class="modal fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-50 hidden opacity-0">
        <div class="modal-content bg-[#1a1a1a] border border-gray-700 rounded-xl shadow-xl w-full max-w-4xl relative text-white opacity-0 scale-95 p-8 text-center">
            <button class="modal-close absolute top-4 right-4 text-gray-400 hover:text-white text-3xl">&times;</button>
            <h2 class="text-3xl font-bold text-white mb-6">Project & Alliance Logos</h2>
            <div id="logo-library-container" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 text-center max-h-96 overflow-y-auto p-4">
                <!-- Logos will be injected by JS -->
            </div>
            <a href="https://github.com/defipatriot/aDAO-Image-Files" target="_blank" rel="noopener noreferrer" class="inline-block mt-6 bg-cyan-600 hover:bg-cyan-700 text-white font-bold py-3 px-6 rounded-lg shadow-lg transition-all transform hover:scale-105">
                View Full Library on GitHub
            </a>
        </div>
    </div>


    <footer class="border-t border-gray-800 mt-12 py-8">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-gray-500 text-sm">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                <div><h4 class="font-bold text-gray-300 mb-2">Disclaimer</h4><p>This website is for informational purposes only and does not constitute financial advice. All data is provided "as is" without warranty. Please do your own research.</p></div>
                <div><h4 class="font-bold text-gray-300 mb-2">Project Origin</h4><p>This site is built and maintained by a council member, not at the direction of the council, but as a passionate community member looking to improve the optics of the collection.</p></div>
                <div><h4 class="font-bold text-gray-300 mb-2">Data Source</h4><p>All data on this site is from a manual snapshot and is not live. The plan is to automate this process in the future.</p><p class="mt-2">Last Manual Update: <span id="last-updated">...</span></p></div>
                <div><h4 class="font-bold text-gray-300 mb-2">Transparency</h4><p>The plan is for the script used to retrieve on-chain data to be open-source. You will be able to view the public repository to see how information is retrieved.</p><a href="https://github.com/defipatriot" target="_blank" rel="noopener noreferrer" class="text-cyan-400 hover:underline mt-2 inline-block">View on GitHub</a></div>
            </div>
        </div>
    </footer>
    
    <!-- New Quick Links Footer -->
    <footer class="py-6">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-gray-400">
            <div class="flex justify-center items-center space-x-6 mb-4">
                <a href="https://t.me/The_AllianceDAO" target="_blank" rel="noopener noreferrer" class="hover:text-white transition-colors"><i class="fab fa-telegram-plane text-3xl"></i></a>
                <a href="https://x.com/The_AllianceDAO" target="_blank" rel="noopener noreferrer" class="hover:text-white transition-colors"><i class="fab fa-twitter text-3xl"></i></a>
            </div>
            <div class="flex justify-center items-center space-x-6 text-sm">
                <a href="tutorials.html" class="hover:text-white hover:underline transition-colors">Tutorials</a>
                <a href="links.html" class="hover:text-white hover:underline transition-colors">Official Links</a>
                <a href="#" id="logo-modal-trigger" class="hover:text-white hover:underline transition-colors cursor-pointer">Logos</a>
                <a href="https://chainsco.pe/terra2/address/terra1phr9fngjv7a8an4dhmhd0u0f98wazxfnzccqtyheq4zqrrp4fpuqw3apw9" target="_blank" rel="noopener noreferrer" class="hover:text-white hover:underline transition-colors">NFT Contract</a>
                <a href="https://github.com/SCV-Security/PublicReports/blob/b819ec669f81e603caca261931e2a4aaca1cddf7/Alliance/Alliance%20DAO%20-%20NFT%20Collection%20Contract%20-%20Audit%20Report%20v1.0.pdf" target="_blank" rel="noopener noreferrer" class="hover:text-white hover:underline transition-colors">Contract Audit</a>
            </div>
        </div>
    </footer>


    <script>
        document.addEventListener('DOMContentLoaded', () => {
             // --- CENTRAL DATA OBJECT ---
            const dashboardData = {
              "lastUpdated": "2025-09-11T16:02:00Z",
              "statusSliders": {
                "mint": { "unMinted": 5828, "minted": 4172, "percentMinted": "41.72%" },
                "broken": { "unBroken": 8924, "broken": 1076, "percentBroken": "10.76%" }
              },
              "keyMetrics": {
                "daodaoStaked": 1476, 
                "daoMembers": 160,
                "enterpriseStakedHolder": 415,
                "backingInLuna": 109.97,
                "avgDailyGain": 0.21,
                "daoBrokenTotal": 1000
              },
              "treasurySnapshot": {
                  "date": "2025-09-11T09:46:00-07:00",
                  "assets": [
                      { "name": "LUNA", "amount": 98840, "value": 15180, "geckoId": "terra-luna-2" },
                      { "name": "ampLUNA", "amount": 57050, "value": 15840, "geckoId": "eris-amplified-luna" },
                      { "name": "ASTRO", "amount": 5690, "value": 28.81, "geckoId": "astroport-fi" },
                      { "name": "WBTC", "amount": 0.000084638, "value": 5.38, "geckoId": "bitcoin" },
                      { "name": "ATOM", "amount": 0.175397, "value": 0.81, "geckoId": "cosmos" },
                      { "name": "CAPA", "amount": 2.69, "value": 3.87, "geckoId": "capapult" }
                  ]
              },
               "tlaSnapshot": {
                  "date": "2025-09-11T09:55:00-07:00",
                  "assets": [
                      { "name": "LUNA", "amount": 38087.92878, "value": 5800, "geckoId": "terra-luna-2" },
                      { "name": "ampLUNA", "amount": 10968.80013, "value": 3000, "geckoId": "eris-amplified-luna" },
                      { "name": "CAPA", "amount": 297235.97184, "value": 4200, "geckoId": "capapult" },
                      { "name": "xASTRO", "amount": 21122.998356, "value": 105, "geckoId": "astroport-fi" },
                      { "name": "ROAR", "amount": 1470786700.4127, "value": null, "geckoId": null },
                      { "name": "ampCAPA", "amount": 273889.95047, "value": null, "geckoId": null },
                      { "name": "ampROAR", "amount": 465955241.26149, "value": null, "geckoId": null }
                  ]
              },
               "tlaVpSnapshot": {
                  "date": "2025-09-11T10:08:00-07:00",
                  "totalVp": 638880,
                  "underlyingLuna": 63880,
                  "locks": [
                      { "id": 600, "asset": "arbLUNA", "amount": 27290, "vp": 631570, "lunaRatio": 2.3201 },
                      { "id": 711, "asset": "ampLUNA", "amount": 413.03, "vp": 7316.76 }
                  ]
              },
              "marketplace": {
                "snapshotDate": "09/11/25",
                "bblSales30d": 18, "bblVolumeAllTime": "211,153 bLUNA",
                "boostSales30d": 6, "boostVolumeAllTime": "Unknown",
                "bbl": {
                    "sold": [ { "id": "1473", "price": "249 bLUNA", "broken": false }, { "id": "3353", "price": "299 bLUNA", "broken": false } ],
                    "listed": [ { "id": "2633", "price": "56,000 bLUNA", "broken": false }, { "id": "615", "price": "199 bLUNA", "broken": true } ]
                },
                "boost": {
                    "sold": [ { "id": "4781", "price": "20 SOLID", "broken": false }, { "id": "615", "price": "10 SOLID", "broken": true } ],
                    "listed": [ { "id": "5258", "price": "60 SOLID", "broken": false }, { "id": "3826", "price": "70 SOLID", "broken": false } ]
                },
                "nftTraits": {
                    "1473": { "rank": 3456, "Background": "Lusa North", "Light": "Lusa", "Weather": "Lusa Rain", "Object": "Kitan Ice Staff", "Inhabitant": "Ozaran M" },
                    "3353": { "rank": 7890, "Background": "Crutha North", "Light": "Crutha", "Weather": "Crutha Smog", "Object": "Pampan Grass Sword", "Inhabitant": "Ozaran F" },
                    "2633": { "rank": 456, "Background": "Kita South", "Light": "Kita", "Weather": "Kita Snow", "Object": "Cristallian Sword", "Inhabitant": "Pampan M" },
                    "615": { "rank": 123, "Background": "Ozara South", "Light": "Ozara", "Weather": "Ozara Sandstorm", "Object": "Pampan Grass Staff", "Inhabitant": "Gredican M" },
                    "4781": { "rank": 1234, "Background": "Crutha South", "Light": "Crutha", "Weather": "Crutha Smog", "Object": "Ice Cleaver", "Inhabitant": "Lusan F" },
                    "5258": { "rank": 8123, "Background": "Pampas North", "Light": "Pampas", "Weather": "Pampas Rain", "Object": "Minasan Bow", "Inhabitant": "Zandoan M" },
                    "3826": { "rank": 2345, "Background": "Sindari South", "Light": "Sindari", "Weather": "Sindari Ash", "Object": "Lusan Water Staff", "Inhabitant": "Cruthan M" }
                }
              }
            };
            
            const tokenLogos = {
                "LUNA": "https://raw.githubusercontent.com/defipatriot/aDAO-Image-Files/main/Luna.webp?raw=true",
                "ampLUNA": "https://raw.githubusercontent.com/defipatriot/aDAO-Image-Files/main/ampLuna.webp?raw=true",
                "ASTRO": "https://raw.githubusercontent.com/defipatriot/aDAO-Image-Files/main/astro.png?raw=true",
                "WBTC": "https://assets.coingecko.com/coins/images/759/small/wrapped_bitcoin_wbtc.png",
                "ATOM": "https://raw.githubusercontent.com/defipatriot/aDAO-Image-Files/main/atom.png?raw=true",
                "CAPA": "https://raw.githubusercontent.com/defipatriot/aDAO-Image-Files/main/capa.png?raw=true",
                "xASTRO": "https://raw.githubusercontent.com/defipatriot/aDAO-Image-Files/main/astro.png?raw=true",
                "ROAR": null,
                "ampCAPA": null,
                "ampROAR": null
            };

            // --- UI UPDATE FUNCTION ---
            function updateUI(data) {
                document.getElementById('last-updated').textContent = new Date(data.lastUpdated).toUTCString();
                
                document.getElementById('mint-slider').innerHTML = `<div class="slider-fill-blue" style="width: ${100 - parseFloat(data.statusSliders.mint.percentMinted)}%;"></div><div class="slider-fill-gray" style="width: ${data.statusSliders.mint.percentMinted};"></div>`;
                document.getElementById('unminted-count').textContent = data.statusSliders.mint.unMinted.toLocaleString();
                document.getElementById('minted-count').textContent = data.statusSliders.mint.minted.toLocaleString();
                document.getElementById('minted-percent').textContent = `${data.statusSliders.mint.percentMinted} Minted`;

                document.getElementById('marketplace-snapshot').textContent = `Marketplace Snapshot Taken ${data.marketplace.snapshotDate}`;
                document.getElementById('bbl-sales-30d').textContent = data.marketplace.bblSales30d.toLocaleString();
                document.getElementById('bbl-volume').textContent = data.marketplace.bblVolumeAllTime;
                document.getElementById('boost-sales-30d').textContent = data.marketplace.boostSales30d.toLocaleString();
                document.getElementById('boost-volume').textContent = data.marketplace.boostVolumeAllTime;
                
                buildMarketplace(data.marketplace);
                fetchLiveOnChainData();
            }

            async function fetchLiveOnChainData() {
                const onChainStatsUrl = 'https://deving.zone/en/nfts/alliance_daos.json';
                const contractUrl = 'https://terra.publicnode.com/cosmwasm/wasm/v1/contract/terra1phr9fngjv7a8an4dhmhd0u0f98wazxfnzccqtyheq4zqrrp4fpuqw3apw9/smart/ewogICJhbGxfbmZ0X2luZm8iOiB7CiAgICAidG9rZW5faWQiOiAiOTA2OCIKICB9Cn0K';
                const exchangeRateUrl = 'https://terra.publicnode.com/cosmwasm/wasm/v1/contract/terra10788fkzah89xrdm27zkj5yvhj9x3494lxawzm5qq3vvxcqz2yzaqyd3enk/smart/ewogICJleGNoYW5nZV9yYXRlcyI6IHt9Cn0=';
                
                const treasuryGeckoIds = dashboardData.treasurySnapshot.assets.map(a => a.geckoId);
                const tlaGeckoIds = dashboardData.tlaSnapshot.assets.map(a => a.geckoId);
                const allGeckoIds = [...new Set([...treasuryGeckoIds, ...tlaGeckoIds, 'terra-luna-2', 'eris-amplified-luna'])].filter(Boolean).join(',');

                const priceUrl = `https://api.coingecko.com/api/v3/simple/price?ids=${allGeckoIds}&vs_currencies=usd`;
                
                try {
                    const [statsResponse, contractResponse, exchangeRateResponse, priceResponse] = await Promise.all([
                        fetch(onChainStatsUrl), 
                        fetch(contractUrl), 
                        fetch(exchangeRateUrl),
                        fetch(priceUrl)
                    ]);
                    if (!statsResponse.ok || !contractResponse.ok || !exchangeRateResponse.ok || !priceResponse.ok) throw new Error("API request failed");

                    const statsData = await statsResponse.json();
                    const contractJson = await contractResponse.json();
                    const exchangeRateData = await exchangeRateResponse.json();
                    const priceData = await priceResponse.json();
                    
                    const { collection_stats, nfts } = statsData;
                    const lunaPriceUSD = priceData['terra-luna-2']?.usd;
                    if (!lunaPriceUSD) throw new Error("Invalid price data for LUNA");

                    buildTreasuryTable(priceData);
                    buildTlaTable(priceData);
                    buildTlaVp(priceData);

                    const daodaoStakers = nfts.filter(nft => nft.daodao === true);
                    const daodaoCount = daodaoStakers.length;
                    const brokenCount = nfts.filter(nft => nft.broken).length;
                    const daoMembers = collection_stats.unique_stakers;
                    
                    const daoEnterpriseWallet = 'terra1nn7yrgjzj6zvle7ms9vlpg4cj3kaxjls4g6ugw';
                    const enterpriseStakers = nfts.filter(nft => nft.enterprise === true && nft.owner !== daoEnterpriseWallet);
                    const enterpriseStakedByHolder = enterpriseStakers.length;

                    // Build Enterprise Stakers Table
                    const enterpriseStakerCounts = enterpriseStakers.reduce((acc, nft) => {
                        acc[nft.owner] = (acc[nft.owner] || 0) + 1;
                        return acc;
                    }, {});
                    buildStakerTable('enterprise-stakers-table', enterpriseStakerCounts);
                    document.getElementById('enterprise-modal-holder-count').textContent = enterpriseStakedByHolder.toLocaleString();

                    // Build DAODAO Stakers Table
                    const daodaoStakerCounts = daodaoStakers.reduce((acc, nft) => {
                        acc[nft.owner] = (acc[nft.owner] || 0) + 1;
                        return acc;
                    }, {});
                     buildStakerTable('daodao-stakers-table', daodaoStakerCounts);
                     document.getElementById('daodao-modal-holder-count').textContent = daodaoCount.toLocaleString();

                    
                    const rewardsValue = contractJson.data.info.extension.attributes.find(attr => attr.trait_type === 'rewards').value;
                    const liveAmpLunaBacking = Number(rewardsValue) / 1000000;

                    const exchangeRates = exchangeRateData?.data?.exchange_rates;
                    if (!exchangeRates || exchangeRates.length === 0 || exchangeRates[0].length < 2) throw new Error("Invalid exchange rate data");
                    const ampLunaToLunaRate = parseFloat(exchangeRates[0][1]);
                    
                    const backingInLunaLive = liveAmpLunaBacking * ampLunaToLunaRate;
                    const backingInUSD = backingInLunaLive * lunaPriceUSD;

                    const unmintedCount = dashboardData.statusSliders.mint.unMinted;
                    const unmintedBackingLuna = unmintedCount * backingInLunaLive;
                    const unmintedBackingUSD = unmintedCount * backingInUSD;

                    // Update UI Tiles that are live
                    updateTile('daodao-staked', daodaoCount.toLocaleString(), true);
                    updateTile('dao-members', daoMembers.toLocaleString(), true);
                    updateTile('enterprise-staked-holder', enterpriseStakedByHolder.toLocaleString(), true, { titleId: 'enterprise-staked-title' });
                    updateTile('broken-count', brokenCount.toLocaleString(), true);
                    document.getElementById('unbroken-count').textContent = (10000 - brokenCount).toLocaleString();
                    document.getElementById('broken-percent').textContent = `${(brokenCount / 10000 * 100).toFixed(2)}% Broken`;
                    document.getElementById('broken-slider').innerHTML = `<div class="slider-fill-blue" style="width: ${100 - (brokenCount / 10000 * 100)}%;"></div><div class="slider-fill-gray" style="width: ${(brokenCount / 10000 * 100)}%;"></div>`;
                    
                    updateTile('backing-per-nft-ampluna', liveAmpLunaBacking.toFixed(4), true, { titleId: 'backing-ampluna-title' });
                    updateTile('backing-per-nft-luna-live', backingInLunaLive.toFixed(4), true, { titleId: 'backing-luna-live-title', subtextId: 'live-ampluna-price-luna', subtext: `Rate: ${ampLunaToLunaRate.toFixed(4)}` });
                    updateTile('backing-per-nft-usd', `$${backingInUSD.toFixed(2)}`, true, { titleId: 'backing-usd-title', subtextId: 'live-luna-price', subtext: `@ $${lunaPriceUSD.toFixed(4)} / LUNA` });
                    
                    document.getElementById('unminted-nft-backing-luna').textContent = `${unmintedBackingLuna.toLocaleString('en-US', {maximumFractionDigits: 0})} LUNA`;
                    document.getElementById('unminted-nft-backing-usd').textContent = `$${unmintedBackingUSD.toLocaleString('en-US', {maximumFractionDigits: 0})} USD`;
                    document.getElementById('unminted-modal-count').textContent = unmintedCount.toLocaleString();
                    document.getElementById('unminted-modal-count-2').textContent = unmintedCount.toLocaleString();
                    document.getElementById('unminted-modal-backing-luna').textContent = backingInLunaLive.toFixed(4);
                    document.getElementById('unminted-modal-backing-usd').textContent = backingInUSD.toFixed(4);
                    document.getElementById('unminted-modal-total-luna').textContent = `${unmintedBackingLuna.toLocaleString('en-US', {maximumFractionDigits: 0})} LUNA`;
                    document.getElementById('unminted-modal-total-usd').textContent = `$${unmintedBackingUSD.toLocaleString('en-US', {maximumFractionDigits: 0})} USD`;

                } catch (error) {
                    console.error("Failed to fetch live data:", error);
                    const { keyMetrics, marketplace } = dashboardData;
                    buildTreasuryTable(null); 
                    buildTlaTable(null);
                    buildTlaVp(null);
                    updateTile('daodao-staked', keyMetrics.daodaoStaked.toLocaleString(), false);
                    updateTile('dao-members', keyMetrics.daoMembers.toLocaleString(), false);
                    updateTile('enterprise-staked-holder', keyMetrics.enterpriseStakedHolder.toLocaleString(), false, { titleId: 'enterprise-staked-title'});
                    updateTile('backing-per-nft-ampluna', '---', false, { titleId: 'backing-ampluna-title' });
                    updateTile('backing-per-nft-luna-live', keyMetrics.backingInLuna.toFixed(2), false, { titleId: 'backing-luna-live-title', subtextId: 'live-ampluna-price-luna', subtext: `(Snap ${marketplace.snapshotDate})` });
                    updateTile('backing-per-nft-usd', '---', false, { titleId: 'backing-usd-title', subtextId: 'live-luna-price', subtext: `(Snap ${marketplace.snapshotDate})` });
                }

                // Update Static Tiles
                const { keyMetrics, marketplace } = dashboardData;
                updateTile('dao-broken-total', keyMetrics.daoBrokenTotal.toLocaleString(), false);
                updateTile('avg-daily-gain', `+${keyMetrics.avgDailyGain}`, false, { titleId: 'avg-daily-gain-title', subtextId: 'avg-daily-gain-subtext', subtext: `(Snap ${marketplace.snapshotDate})`});
            }
            
            function buildTreasuryTable(priceData) {
                const { assets, date } = dashboardData.treasurySnapshot;
                const container = document.getElementById('treasury-table-container');
                let totalLive = 0;
                let totalSnapshot = 0;

                let tableHtml = `<table class="w-full text-left text-sm"><thead class="sticky top-0 bg-gray-900 z-10"><tr><th class="p-2">Asset</th><th class="p-2 text-right">Amount</th><th class="p-2 text-right">Live Value</th><th class="p-2 text-right">Snapshot (${new Date(date).toLocaleDateString()})</th></tr></thead><tbody>`;

                for(const asset of assets) {
                    const livePrice = priceData && priceData[asset.geckoId] ? priceData[asset.geckoId].usd : null;
                    const liveValue = livePrice ? asset.amount * livePrice : null;
                    if(liveValue) totalLive += liveValue;
                    totalSnapshot += asset.value;
                    
                    let amountFormatted;
                    if (asset.amount < 1) {
                        amountFormatted = asset.amount.toFixed(8);
                    } else {
                        amountFormatted = asset.amount.toLocaleString('en-US', { maximumFractionDigits: 2 });
                    }
                    
                    const logoUrl = tokenLogos[asset.name];

                    tableHtml += `
                        <tr class="border-t border-gray-700">
                            <td class="p-2 font-bold flex items-center gap-2">
                                ${logoUrl ? `<img src="${logoUrl}" alt="${asset.name}" class="h-5 w-5 rounded-full">` : '<div class="h-5 w-5"></div>'}
                                <span>${asset.name}</span>
                            </td>
                            <td class="p-2 text-right font-mono">${amountFormatted}</td>
                            <td class="p-2 text-right font-mono">${liveValue ? '$' + liveValue.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2}) : '<span class="text-gray-500">N/A</span>'}</td>
                            <td class="p-2 text-right font-mono">${'$' + asset.value.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</td>
                        </tr>
                    `;
                }
                
                tableHtml += `</tbody><tfoot class="sticky bottom-0 bg-gray-900 z-10"><tr class="border-t-2 border-cyan-400 font-bold"><td class="p-2">Total</td><td></td><td class="p-2 text-right font-mono text-cyan-400">${'$' + totalLive.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</td><td class="p-2 text-right font-mono text-cyan-400">${'$' + totalSnapshot.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</td></tr></tfoot></table>`;
                container.innerHTML = tableHtml;

                document.getElementById('dao-treasury-total').textContent = '$' + (totalLive > 0 ? totalLive : totalSnapshot).toLocaleString('en-US', {maximumFractionDigits: 0});
                updateTile('dao-treasury-total', null, false, { titleId: 'dao-treasury-title' });

                 if (!priceData) { // Fallback if live prices fail
                    const snapshotTotal = assets.reduce((sum, asset) => sum + asset.value, 0);
                    document.getElementById('dao-treasury-total').textContent = '$' + snapshotTotal.toLocaleString('en-US', {maximumFractionDigits: 0});
                }
            }

            function buildTlaTable(priceData) {
                const { assets, date } = dashboardData.tlaSnapshot;
                const container = document.getElementById('tla-table-container');
                let totalLive = 0;
                let totalSnapshot = 0;

                let tableHtml = `<table class="w-full text-left text-sm"><thead class="sticky top-0 bg-gray-900 z-10"><tr><th class="p-2">Asset</th><th class="p-2 text-right">Amount</th><th class="p-2 text-right">Live Value</th><th class="p-2 text-right">Snapshot (${new Date(date).toLocaleDateString()})</th></tr></thead><tbody>`;

                for(const asset of assets) {
                    const livePrice = priceData && priceData[asset.geckoId] ? priceData[asset.geckoId].usd : null;
                    const liveValue = livePrice ? asset.amount * livePrice : null;
                    if(liveValue) totalLive += liveValue;
                    if(asset.value) totalSnapshot += asset.value;
                    
                    const logoUrl = tokenLogos[asset.name];

                    tableHtml += `
                        <tr class="border-t border-gray-700">
                             <td class="p-2 font-bold flex items-center gap-2">
                                ${logoUrl ? `<img src="${logoUrl}" alt="${asset.name}" class="h-5 w-5 rounded-full">` : '<div class="h-5 w-5"></div>'}
                                <span>${asset.name}</span>
                            </td>
                            <td class="p-2 text-right font-mono">${asset.amount.toLocaleString('en-US', {maximumFractionDigits: 2})}</td>
                            <td class="p-2 text-right font-mono">${liveValue ? '$' + liveValue.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2}) : '<span class="text-gray-500">N/A</span>'}</td>
                            <td class="p-2 text-right font-mono">${asset.value ? '$' + asset.value.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2}) : '<span class="text-gray-500">N/A</span>'}</td>
                        </tr>
                    `;
                }
                
                tableHtml += `</tbody><tfoot class="sticky bottom-0 bg-gray-900 z-10"><tr class="border-t-2 border-cyan-400 font-bold"><td class="p-2">Total</td><td></td><td class="p-2 text-right font-mono text-cyan-400">${'$' + totalLive.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</td><td class="p-2 text-right font-mono text-cyan-400">${'$' + totalSnapshot.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</td></tr></tfoot></table>`;
                container.innerHTML = tableHtml;

                document.getElementById('dao-tla-total').textContent = '$' + (totalLive > 0 ? totalLive : totalSnapshot).toLocaleString('en-US', {maximumFractionDigits: 0});
                 updateTile('dao-tla-total', null, false, { titleId: 'dao-tla-title' });

                if (!priceData) { // Fallback if live prices fail
                    const snapshotTotal = assets.reduce((sum, asset) => sum + (asset.value || 0), 0);
                    document.getElementById('dao-tla-total').textContent = '$' + snapshotTotal.toLocaleString('en-US', {maximumFractionDigits: 0});
                }
            }
            
            function buildStakerTable(tableId, stakerData) {
                const tableContainer = document.getElementById(tableId);
                if (!tableContainer) return;

                let tableHtml = `<div class="max-h-64 overflow-y-auto bg-gray-800/50 p-2 rounded-lg"><table class="w-full text-left text-sm"><thead class="sticky top-0 bg-gray-900 z-10"><tr><th class="p-2">Wallet Address</th><th class="p-2 text-right">NFTs Staked</th></tr></thead><tbody>`;
                const sortedStakers = Object.entries(stakerData).sort(([, a], [, b]) => b - a);
                
                if(sortedStakers.length > 0) {
                    for (const [address, count] of sortedStakers) {
                        tableHtml += `<tr class="border-t border-gray-700"><td class="p-2 font-mono">${address}</td><td class="p-2 text-right font-bold">${count}</td></tr>`;
                    }
                } else {
                    tableHtml += `<tr><td colspan="2" class="text-center p-4">No holder NFTs currently staked.</td></tr>`;
                }
                tableHtml += `</tbody></table></div>`;
                tableContainer.innerHTML = tableHtml;
            }

            function buildTlaVp(priceData) {
                const { tlaVpSnapshot } = dashboardData;
                const container = document.getElementById('tla-vp-locks-container');
                const lunaPriceUSD = priceData ? priceData['terra-luna-2']?.usd : null;
                const ampLunaPriceUSD = priceData ? priceData['eris-amplified-luna']?.usd : null;
                const liveUsdValue = lunaPriceUSD ? tlaVpSnapshot.underlyingLuna * lunaPriceUSD : null;

                document.getElementById('dao-tla-vp').textContent = `${(tlaVpSnapshot.totalVp / 1000).toFixed(2)}K VP`;
                document.getElementById('dao-tla-vp-usd').textContent = liveUsdValue ? `$${liveUsdValue.toLocaleString('en-US', {maximumFractionDigits: 0})}` : '...';

                document.getElementById('tla-vp-modal-luna').textContent = `~${(tlaVpSnapshot.underlyingLuna / 1000).toFixed(2)}K LUNA`;
                document.getElementById('tla-vp-modal-usd').textContent = liveUsdValue ? `($${liveUsdValue.toLocaleString('en-US', {maximumFractionDigits: 2})})` : '(Live price unavailable)';

                let locksHtml = '';
                tlaVpSnapshot.locks.forEach(lock => {
                    let lockUsdValueHtml = `<p class="text-xs text-gray-500">(Live price unavailable)</p>`;
                    if (lunaPriceUSD && lock.asset === 'arbLUNA' && lock.lunaRatio) {
                        lockUsdValueHtml = `<p class="text-xs text-gray-500">$${(lock.amount * lock.lunaRatio * lunaPriceUSD).toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})} <span class="text-gray-600">(ratio @ snap)</span></p>`;
                    } else if (ampLunaPriceUSD && lock.asset === 'ampLUNA') {
                         lockUsdValueHtml = `<p class="text-xs text-gray-500">$${(lock.amount * ampLunaPriceUSD).toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</p>`;
                    }

                    locksHtml += `
                        <div class="bg-gray-800/50 p-4 rounded-lg grid grid-cols-4 gap-4 items-center text-center mt-2">
                            <div>
                                <p class="font-bold text-lg text-white">Lock #${lock.id}</p>
                            </div>
                            <div>
                                <p class="text-sm text-gray-400">Locked Amount</p>
                                <p class="font-bold text-white">${lock.amount.toLocaleString('en-US', {maximumFractionDigits:2})} ${lock.asset}</p>
                                ${lockUsdValueHtml}
                            </div>
                            <div>
                                <p class="text-sm text-gray-400">Unlock</p>
                                <p class="font-bold text-white">Auto Max-Lock</p>
                            </div>
                             <div>
                                <p class="text-sm text-gray-400">Voting Power</p>
                                <p class="font-bold text-cyan-400">${(lock.vp / 1000).toFixed(2)}K VP</p>
                            </div>
                        </div>
                    `;
                });
                container.innerHTML = locksHtml;
                updateTile('dao-tla-vp-usd', null, false, { titleId: 'dao-tla-vp-title' });
            }

            function updateTile(elementId, value, isLive, options = {}) {
                 if (value !== null && value !== undefined) {
                    const el = document.getElementById(elementId);
                    if (el) el.textContent = value;
                }
                const titleId = options.titleId || `${elementId}-title`;
                const titleEl = document.getElementById(titleId);
                if (titleEl) {
                    // Clear existing dot first
                    const existingDot = titleEl.querySelector('.pulse-dot, .static-dot-red');
                    if (existingDot) existingDot.remove();
                    
                    const newDot = document.createElement('span');
                    newDot.className = isLive ? 'pulse-dot ml-1' : 'static-dot-red ml-1';
                    titleEl.appendChild(newDot);
                }
                if (options.subtextId && options.subtext) {
                     const subtextEl = document.getElementById(options.subtextId);
                     if (subtextEl) subtextEl.textContent = options.subtext;
                }
            }

            function buildMarketplace(marketplaceData) {
                const createNftCard = (nft, marketplace, type) => {
                    const card = document.createElement('div');
                    card.className = 'activity-card rounded-lg';
                    let statusClass = '', statusText = '';
                    if (type === 'listed') {
                        statusClass = marketplace === 'bbl' ? 'status-bbl' : 'status-boost';
                        statusText = marketplace.toUpperCase();
                    } else { // sold
                        statusClass = 'status-liquid';
                        statusText = '&nbsp;';
                    }
                    
                    card.innerHTML = `
                        <div class="relative">
                            <img src="https://dweb.link/ipfs/bafybeiek4cv2w6ot767nriveyzagejnvzpw3qr2b7iyc6ccddid6jj77za/${nft.id}.png" alt="NFT #${nft.id}" class="w-full h-auto">
                            <div class="broken-overlay ${!nft.broken ? 'hidden' : ''}"><div class="broken-banner">Broken</div></div>
                        </div>
                        <div class="status-bar p-2 flex justify-between items-center">
                            <span class="font-bold text-md text-white">NFT #${nft.id}</span>
                            <span class="status-text ${statusClass} flex items-center gap-2">${statusText}
                                ${nft.broken ? `<span class="toggle-broken-btn" title="Show Original Image"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye" viewBox="0 0 16 16"><path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.816 1.097-2.28 2.48-4.232 3.489C8.68 12.83 7.12 13.5 5 13.5 2.88 13.5 1.321 12.83.172 11.489A13.133 13.133 0 0 1 1.172 8z"/><path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"/></svg></span>` : ''}
                            </span>
                        </div>
                        <div class="p-3 text-center"><p class="text-sm text-cyan-400 font-semibold">${nft.price}</p></div>
                    `;
                    card.addEventListener('click', (e) => {
                        if (!e.target.closest('.toggle-broken-btn')) {
                            showNftDetails(nft);
                        }
                    });
                    return card;
                };

                const bblSoldContainer = document.getElementById('bbl-sold-container');
                bblSoldContainer.innerHTML = ''; 
                marketplaceData.bbl.sold.forEach(nft => bblSoldContainer.appendChild(createNftCard(nft, 'bbl', 'sold')));

                const bblListedContainer = document.getElementById('bbl-listed-container');
                bblListedContainer.innerHTML = '';
                marketplaceData.bbl.listed.forEach(nft => bblListedContainer.appendChild(createNftCard(nft, 'bbl', 'listed')));
                
                const boostSoldContainer = document.getElementById('boost-sold-container');
                boostSoldContainer.innerHTML = '';
                marketplaceData.boost.sold.forEach(nft => boostSoldContainer.appendChild(createNftCard(nft, 'boost', 'sold')));
                
                const boostListedContainer = document.getElementById('boost-listed-container');
                boostListedContainer.innerHTML = '';
                marketplaceData.boost.listed.forEach(nft => boostListedContainer.appendChild(createNftCard(nft, 'boost', 'listed')));
                
                attachToggleListeners();
            }
            function showNftDetails(nft) {
                const nftData = dashboardData.marketplace.nftTraits[nft.id];
                if (!nftData) return; 

                document.getElementById('modalNftImage').src = `https://dweb.link/ipfs/bafybeiek4cv2w6ot767nriveyzagejnvzpw3qr2b7iyc6ccddid6jj77za/${nft.id}.png`;
                document.getElementById('modalNftTitle').textContent = `NFT #${nft.id}`;
                document.getElementById('modalNftPrice').textContent = nft.price;
                document.getElementById('modalNftRank').textContent = `Rank: #${nftData.rank}`;

                const traitsContainer = document.getElementById('modalNftTraits');
                traitsContainer.innerHTML = '';
                const traitOrder = ["Background", "Light", "Weather", "Object", "Inhabitant"];
                traitOrder.forEach(trait => {
                    if (nftData[trait]) {
                        traitsContainer.innerHTML += `
                            <div class="flex justify-between items-center text-sm bg-gray-800/50 p-2 rounded">
                                <span class="font-semibold text-gray-400">${trait}</span>
                                <span class="text-white">${nftData[trait]}</span>
                            </div>
                        `;
                    }
                });
                
                const modal = document.getElementById('nftDetailModal');
                modal.classList.remove('hidden', 'opacity-0');
                setTimeout(() => modal.querySelector('.modal-content').classList.remove('scale-95', 'opacity-0'), 10);
            }
            function attachToggleListeners() {
                const toggleButtons = document.querySelectorAll('.toggle-broken-btn');
                toggleButtons.forEach(button => {
                    button.addEventListener('click', function(e) {
                        e.stopPropagation(); 
                        const card = this.closest('.activity-card');
                        if (card) {
                            const overlay = card.querySelector('.broken-overlay');
                            if (overlay) {
                                overlay.classList.toggle('hidden');
                            }
                        }
                    });
                });
            }
            function setupNftModal() {
                 const modal = document.getElementById('nftDetailModal');
                 const closeButton = document.getElementById('closeNftDetailModal');

                 const closeModal = () => {
                    modal.classList.add('opacity-0');
                    modal.querySelector('.modal-content').classList.add('scale-95', 'opacity-0');
                    setTimeout(() => modal.classList.add('hidden'), 300);
                 }

                 closeButton.addEventListener('click', closeModal);
                 modal.addEventListener('click', (e) => {
                     if(e.target === modal) closeModal();
                 });
            }
            
            function setupInfoModals() {
                const modalTriggers = {
                    'daodao-staked-card': 'daodaoModal',
                    'enterprise-staked-card': 'enterpriseModal',
                    'dao-broken-card': 'daoBrokenModal',
                    'unminted-backing-card': 'unmintedModal',
                    'dao-treasury-card': 'treasuryModal',
                    'dao-tla-card': 'tlaModal',
                    'dao-tla-vp-card': 'tlaVpModal',
                    'logo-modal-trigger': 'logoModal'
                };

                const openModal = (modalId) => {
                    const modal = document.getElementById(modalId);
                    if (!modal) return;
                    modal.classList.remove('hidden', 'opacity-0');
                    setTimeout(() => modal.querySelector('.modal-content').classList.remove('scale-95', 'opacity-0'), 10);
                };

                const closeModal = (modal) => {
                    if (!modal) return;
                    modal.classList.add('opacity-0');
                    modal.querySelector('.modal-content').classList.add('scale-95', 'opacity-0');
                    setTimeout(() => modal.classList.add('hidden'), 300);
                };

                for (const triggerId in modalTriggers) {
                    const trigger = document.getElementById(triggerId);
                    if (trigger) {
                        trigger.addEventListener('click', (e) => {
                             e.preventDefault(); // Prevent default link behavior
                             openModal(modalTriggers[triggerId])
                        });
                    }
                }

                document.querySelectorAll('.modal-close').forEach(button => {
                    const modal = button.closest('.modal');
                    if(modal) {
                       button.addEventListener('click', () => closeModal(modal));
                    }
                });
                
                document.querySelectorAll('.modal').forEach(modal => {
                    if (modal.id !== 'nftDetailModal') {
                        modal.addEventListener('click', (e) => {
                            if (e.target === modal) closeModal(modal);
                        });
                    }
                });
            }

            function buildLogoModal() {
                const logos = [
                    { "name": "Alliance DAO", "url": "https://raw.githubusercontent.com/defipatriot/aDAO-Image-Files/main/Alliance%20DAO%20Logo.png" },
                    { "name": "Alliance DAO (No BG)", "url": "https://raw.githubusercontent.com/defipatriot/aDAO-Image-Files/main/aDAO%20Logo%20No%20Background.png" },
                    { "name": "Alliance DAO (SVG)", "url": "https://raw.githubusercontent.com/defipatriot/aDAO-Image-Files/main/aDAO%20Logo.svg" },
                    { "name": "Enterprise Protocol", "url": "https://raw.githubusercontent.com/defipatriot/aDAO-Image-Files/main/Enterprise.jpg" },
                    { "name": "Boost", "url": "https://raw.githubusercontent.com/defipatriot/aDAO-Image-Files/main/Boost%20Logo.png" },
                    { "name": "BackBone Labs", "url": "https://raw.githubusercontent.com/defipatriot/aDAO-Image-Files/main/BBL%20No%20Background.png" },
                    { "name": "Terra", "url": "https://raw.githubusercontent.com/defipatriot/aDAO-Image-Planets-Empty/main/Terra.PNG" }
                ];

                const container = document.getElementById('logo-library-container');
                if (!container) return;
                container.innerHTML = ''; // Clear previous content

                logos.forEach(logo => {
                    const logoCard = document.createElement('div');
                    logoCard.className = 'flex flex-col items-center justify-between p-4 bg-gray-800/50 rounded-lg h-full';
                    
                    const logoUrl = logo.url;

                    logoCard.innerHTML = `
                        <a href="${logoUrl}" target="_blank" rel="noopener noreferrer" class="flex-grow flex items-center justify-center mb-2">
                            <img src="${logoUrl}" alt="${logo.name} Logo" class="max-h-20 max-w-full">
                        </a>
                        <div class="w-full">
                            <p class="text-xs text-gray-400 mb-2 truncate">${logo.name}</p>
                            <button class="copy-logo-url-btn w-full bg-gray-700 hover:bg-gray-600 text-white text-xs font-bold py-1 px-2 rounded transition-colors" data-url="${logoUrl}">
                                Copy URL
                            </button>
                        </div>
                    `;
                    container.appendChild(logoCard);
                });

                // Add event listeners for the new copy buttons
                document.querySelectorAll('.copy-logo-url-btn').forEach(button => {
                    button.addEventListener('click', function(e) {
                        const urlToCopy = this.dataset.url;
                        const originalText = this.textContent;

                        const textArea = document.createElement('textarea');
                        textArea.value = urlToCopy;
                        textArea.style.position = 'absolute';
                        textArea.style.left = '-9999px';
                        document.body.appendChild(textArea);
                        textArea.select();
                        try {
                            document.execCommand('copy');
                            this.textContent = 'Copied!';
                        } catch (err) {
                            console.error('Failed to copy text: ', err);
                            this.textContent = 'Error!';
                        }
                        document.body.removeChild(textArea);

                        setTimeout(() => {
                            this.textContent = originalText;
                        }, 1500);
                    });
                });
            }

            // --- Initial Page Load ---
            updateUI(dashboardData);
            setupNftModal();
            setupInfoModals();
            buildLogoModal();

            // --- Disclaimer Banner Logic ---
            const banner = document.getElementById('disclaimer-banner');
            const closeButton = document.getElementById('close-banner');
            if (banner && closeButton) {
                closeButton.addEventListener('click', () => {
                    banner.style.display = 'none';
                });
            }
        });
    </script>
</body>
</html>


